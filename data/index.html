<!DOCTYPE html> <html> <head> <style> body{ margin:0;background:black;}#term{ height:100vh;--background:#031e11;--size:1.5;} #term::after{ content:" ";display:block;position:fixed;top:0;left:0;bottom:0;right:0;background:rgba(18, 16, 16, 0.2);opacity:0;z-index:2;pointer-events:none; }@keyframes flicker{ 0%{ opacity:0.552;}5%{ opacity:0.48287;}10%{ opacity:0.59134;}15.0%{ opacity:0.79543;}20%{ opacity:0.75134;}25%{ opacity:0.1956;}30.0%{ opacity:0.90687;}35%{ opacity:0.122;}40%{ opacity:0.62254;}45%{ opacity:0.56977;}50%{ opacity:0.9925;}55.0%{ opacity:0.55487;}60.0%{ opacity:0.16607;}65%{ opacity:0.12353;}70%{ opacity:0.2214;}75%{ opacity:0.67908;}80%{ opacity:0.97163;}85.0%{ opacity:0.1275;}90%{ opacity:0.37186;}95%{ opacity:0.24475;}100%{ opacity:0.37221;}} .cmd:focus-within .prompt{ }.terminal{ text-shadow:0 0.2rem 1rem #0c7b46;}.terminal a:hover{ background:#0F60FF;color:var(--background, #aaa);text-decoration:none;}.scanlines{ top:0;left:0;height:100%;width:100%;background:linear-gradient( to bottom, rgba(255,255,255,0), rgba(255,255,255,0) 50%, rgba(0,0,0,.2) 70%, rgba(0,0,0,.6) );background-size:100% .3rem;position:fixed;pointer-events:none;} .scanlines:before{ position:absolute;top:0px;width:100%;height:5px;background:#fff;background:linear-gradient(to bottom, rgba(255,0,0,0) 0%, rgba(255,250,250,1) 50%, rgba(255,255,255,0.98) 51%, rgba(255,0,0,0) 100% ); opacity:.1;}.scanlines:after{ box-shadow:0 2px 6px rgba(25,25,25,0.2), inset 0 1px rgba(50,50,50,0.1), inset 0 3px rgba(50,50,50,0.05), inset 0 3px 8px rgba(64,64,64,0.05), inset 0 -5px 10px rgba(25,25,25,0.1);}#term:focus-within + .scanlines:before{ content:'';animation:vline calc(var(--time, 2) * 1s) linear infinite;} @supports (-ms-ime-align:auto){ .scanlines:before{ content:'';animation:vline 3s linear infinite;}}@keyframes vline{ to{ transform:translate(0, 100vh)}} .tv{ height:100vh;position:relative;}.tv.collapse{ animation:size 2s ease-out;animation-fill-mode:forwards;}.tv.collapse:before{ content:'';display:block;height:100%;position:absolute;left:0;right:0;bottom:0;top:0;background:white;z-index:1;opacity:0;animation:opacity 2s ease-out;animation-fill-mode:forwards;}@keyframes opacity{ to{ opacity:1;}}@keyframes size{ 50%{ transform:scaleX(calc(1 / var(--width)));opacity:1;}98%{ transform:scaleX(calc(1 / var(--width))) scaleY(calc(1 / var(--height)));opacity:1;}100%{ transform:scaleX(calc(1 / var(--width))) scaleY(calc(1 / var(--height)));opacity:0;}}#fileInput{ display:none;}</style> <style> .terminal .terminal-output .format, .cmd .format, .cmd .prompt, .cmd .prompt div, .terminal .terminal-output div div{ display:inline-block;}.terminal h1, .terminal h2, .terminal h3, .terminal h4, .terminal h5, .terminal h6, .terminal pre, .cmd{ margin:0;}.terminal h1, .terminal h2, .terminal h3, .terminal h4, .terminal h5, .terminal h6{ line-height:1.2em;} .cmd .clipboard{ position:absolute;left:-16px;top:0;width:20px;height:16px; opacity:0.01;filter:alpha(opacity = 0.01);filter:progid:DXImageTransform.Microsoft.Alpha(opacity=0.01);background:transparent;border:none;color:transparent;outline:none;padding:0;resize:none;z-index:0;overflow:hidden;white-space:pre;text-indent:-9999em; }.terminal .error{ color:#f00;}.terminal{ position:relative; overflow-y:auto;overflow-x:hidden;}body.terminal{ height:100vh;margin:0;}.terminal > div{ height:100%;}.cmd{ padding:0;position:relative; float:left;overflow:hidden;padding-bottom:3px;}.terminal .inverted, .cmd .inverted{ background-color:#aaa;color:#000;}.cmd .cursor{ border-bottom:3px solid transparent;margin-bottom:-3px;background-clip:content-box;}.cmd .cursor.blink{ -webkit-animation:terminal-blink 1s infinite steps(1, start);-moz-animation:terminal-blink 1s infinite steps(1, start);-ms-animation:terminal-blink 1s infinite steps(1, start);animation:terminal-blink 1s infinite steps(1, start);border-left:1px solid transparent;margin-left:-1px;}.bar.terminal .inverted, .bar.cmd .inverted{ border-left-color:#aaa;}.terminal .terminal-output div div, .cmd .prompt{ display:block;line-height:14px;height:auto;}.cmd .prompt > span{ float:left;}.terminal, .cmd{ font-family:monospace; color:#aaa;background-color:#000;font-size:12px;line-height:14px;box-sizing:border-box;cursor:text;}.cmd div{ clear:both;}.cmd .prompt + div{ clear:right;}.terminal-output > div, .terminal-output > div > div{ min-height:14px;}.terminal-output > div > div *{ overflow-wrap:break-word; word-wrap:break-word;}.terminal .terminal-output div span{ display:inline-block;}.cmd > span:not(.prompt){ float:left;}.cmd .prompt span.line{ display:block;float:none;} .terminal-output span, .terminal-output a, .cmd div, .cmd span, .terminal td, .terminal pre, .terminal h1, .terminal h2, .terminal h3, .terminal h4, .terminal h5, .terminal h6{ -webkit-touch-callout:initial;-webkit-user-select:text;-khtml-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;}.terminal, .terminal-output, .terminal-output div{ -webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;} @-moz-document url-prefix(){ .terminal, .terminal-output, .terminal-output div{ -webkit-touch-callout:initial;-webkit-user-select:initial;-khtml-user-select:initial;-moz-user-select:initial;-ms-user-select:initial;user-select:initial;}}.terminal table{ border-collapse:collapse;}.terminal td{ border:1px solid #aaa;}.terminal h1::-moz-selection, .terminal h2::-moz-selection, .terminal h3::-moz-selection, .terminal h4::-moz-selection, .terminal h5::-moz-selection, .terminal h6::-moz-selection, .terminal pre::-moz-selection, .terminal td::-moz-selection, .terminal .terminal-output div div::-moz-selection, .terminal .terminal-output div span::-moz-selection, .terminal .terminal-output div div a::-moz-selection, .cmd div::-moz-selection, .cmd > span::-moz-selection, .cmd > span span::-moz-selection, .cmd > div::-moz-selection, .cmd > div span::-moz-selection, .cmd .prompt span::-moz-selection{ background-color:#aaa;color:#000;} .terminal h1::selection, .terminal h2::selection, .terminal h3::selection, .terminal h4::selection, .terminal h5::selection, .terminal h6::selection, .terminal pre::selection, .terminal td::selection, .terminal .terminal-output div div::selection, .terminal .terminal-output div div a::selection, .terminal .terminal-output div span::selection, .cmd div::selection, .cmd > span::selection, .cmd > span span::selection, .cmd > div::selection, .cmd > div span::selection, .cmd .prompt span::selection{ background-color:rgba(170, 170, 170, 0.99);color:#000;}.terminal .terminal-output div.error, .terminal .terminal-output div.error div{ color:red;}.tilda{ position:fixed;top:0;left:0;width:100%;z-index:1100;}.clear{ clear:both;}.terminal a{ color:#0F60FF;}.terminal a:hover{ color:red;}.terminal .terminal-fill{ position:absolute;left:0;top:-100%;width:100%;height:100%;margin:1px 0 0;border:none;opacity:0;pointer-events:none;box-sizing:border-box;}.terminal, .terminal .terminal-fill{ padding:10px;}@-webkit-keyframes terminal-blink{ 0%, 100%{ background-color:#000;color:#aaa;}50%{ background-color:#bbb;color:#000;}}@-ms-keyframes terminal-blink{ 0%, 100%{ background-color:#000;color:#aaa;}50%{ background-color:#bbb;color:#000;}}@-moz-keyframes terminal-blink{ 0%, 100%{ background-color:#000;color:#aaa;}50%{ background-color:#bbb;color:#000;}}@keyframes terminal-blink{ 0%, 100%{ background-color:#000;color:#aaa;}50%{ background-color:#bbb; color:#000;}}@-webkit-keyframes terminal-bar{ 0%, 100%{ border-left-color:#aaa;}50%{ border-left-color:#000;}}@-ms-keyframes terminal-bar{ 0%, 100%{ border-left-color:#aaa;}50%{ border-left-color:#000;}}@-moz-keyframes terminal-bar{ 0%, 100%{ border-left-color:#aaa;}50%{ border-left-color:#000;}}@keyframes terminal-bar{ 0%, 100%{ border-left-color:#aaa;}50%{ border-left-color:#000;}}@-webkit-keyframes terminal-underline{ 0%, 100%{ border-bottom-color:#aaa;position:relative;line-height:12px;margin-top:1px;border-left:none;margin-left:0;}50%{ border-bottom-color:#000;position:relative;line-height:12px;margin-top:1px;border-left:none;margin-left:0;}}@-ms-keyframes terminal-underline{ 0%, 100%{ border-bottom-color:#aaa;position:relative;line-height:12px;margin-top:1px;border-left:none;margin-left:0;}50%{ border-bottom-color:#000;position:relative;line-height:12px;margin-top:1px;border-left:none;margin-left:0;}}@-moz-keyframes terminal-underline{ 0%, 100%{ border-bottom-color:#aaa;position:relative;line-height:12px;margin-top:1px;border-left:none;margin-left:0;}50%{ border-bottom-color:#000;position:relative;line-height:12px;margin-top:1px;border-left:none;margin-left:0;}}@keyframes terminal-underline{ 0%, 100%{ border-bottom-color:#aaa;position:relative;line-height:12px;margin-top:1px;border-left:none;margin-left:0;}50%{ border-bottom-color:#000;position:relative;line-height:12px;margin-top:1px;border-left:none;margin-left:0;}}@supports (--css:variables){ .terminal, .cmd{ color:var(--color, #aaa);background-color:var(--background, #000);}.terminal span[style*="--length"]{ width:calc(var(--length, 1) * var(--char-width) * 1px);display:inline-block;}.terminal, .cmd, .terminal .terminal-output div div, .cmd .prompt{ font-size:calc(var(--size, 1) * 12px);line-height:calc(var(--size, 1) * 14px);}.terminal .terminal-output div div{ min-height:calc(var(--size, 1) * 14px);}.terminal .inverted, .cmd .inverted{ background-color:var(--color, #aaa);color:var(--background, #000);}.cmd .cursor.blink{ -webkit-animation:var(--animation, terminal-blink) 1s infinite steps(1, start);-moz-animation:var(--animation, terminal-blink) 1s infinite steps(1, start);-ms-animation:var(--animation, terminal-blink) 1s infinite steps(1, start);animation:var(--animation, terminal-blink) 1s infinite steps(1, start);color:var(--color, #aaa);background-color:var(--background, #000);}.terminal h1::-moz-selection, .terminal h2::-moz-selection, .terminal h3::-moz-selection, .terminal h4::-moz-selection, .terminal h5::-moz-selection, .terminal h6::-moz-selection, .terminal pre::-moz-selection, .terminal td::-moz-selection, .terminal .terminal-output div div::-moz-selection, .terminal .terminal-output div span::-moz-selection, .terminal .terminal-output div div a::-moz-selection, .cmd div::-moz-selection, .cmd > span::-moz-selection, .cmd > span span::-moz-selection, .cmd > div::-moz-selection, .cmd > div span::-moz-selection, .cmd .prompt span::-moz-selection{ background-color:var(--color, #aaa);color:var(--background, #000);}.terminal h1::selection, .terminal h2::selection, .terminal h3::selection, .terminal h4::selection, .terminal h5::selection, .terminal h6::selection, .terminal pre::selection, .terminal td::selection, .terminal .terminal-output div div::selection, .terminal .terminal-output div div a::selection, .terminal .terminal-output div span::selection, .cmd div::selection, .cmd > span::selection, .cmd > span span::selection, .cmd > div::selection, .cmd > div span::selection, .cmd .prompt span::selection{ background-color:var(--color, rgba(170, 170, 170, 0.99));color:var(--background, #000);}@-webkit-keyframes terminal-blink{ 0%, 100%{ background-color:var(--background, #000);color:var(--color, #aaa);}50%{ background-color:var(--color, #aaa);color:var(--background, #000);}}@-ms-keyframes terminal-blink{ 0%, 100%{ background-color:var(--background, #000);color:var(--color, #aaa);}50%{ background-color:var(--color, #aaa);color:var(--background, #000);}}@-moz-keyframes terminal-blink{ 0%, 100%{ background-color:var(--background, #000);color:var(--color, #aaa);}50%{ background-color:var(--color, #aaa);color:var(--background, #000);}}@keyframes terminal-blink{ 0%, 100%{ background-color:var(--background, #000);color:var(--color, #aaa);}50%{ background-color:var(--color, #aaa);color:var(--background, #000);}}@-webkit-keyframes terminal-bar{ 0%, 100%{ border-left-color:var(--background, #000);}50%{ border-left-color:var(--color, #aaa);}}@-ms-keyframes terminal-bar{ 0%, 100%{ border-left-color:var(--background, #000);}50%{ border-left-color:var(--color, #aaa);}}@-moz-keyframes terminal-bar{ 0%, 100%{ border-left-color:var(--background, #000);}50%{ border-left-color:var(--color, #aaa);}}@keyframes terminal-bar{ 0%, 100%{ border-left-color:var(--background, #000);}50%{ border-left-color:var(--color, #aaa);}}@-webkit-keyframes terminal-underline{ 0%, 100%{ border-bottom-color:var(--color, #aaa);position:relative;line-height:calc(var(--size, 1) * 12px);margin-top:calc(var(--size, 1) * 1px);border-left:none;margin-left:0;}50%{ border-bottom-color:var(--background, #000);position:relative;line-height:calc(var(--size, 1) * 12px);margin-top:calc(var(--size, 1) * 1px);border-left:none;margin-left:0;}}@-ms-keyframes terminal-underline{ 0%, 100%{ border-bottom-color:var(--background, #000);position:relative;line-height:calc(var(--size, 1) * 12px);margin-top:calc(var(--size, 1) * 1px);border-left:none;margin-left:0;}50%{ border-bottom-color:var(--color, #aaa);position:relative;line-height:calc(var(--size, 1) * 12px);margin-top:calc(var(--size, 1) * 1px);border-left:none;margin-left:0;}}@-moz-keyframes terminal-underline{ 0%, 100%{ border-bottom-color:var(--background, #000);position:relative;line-height:calc(var(--size, 1) * 12px);margin-top:calc(var(--size, 1) * 1px);border-left:none;margin-left:0;}50%{ border-bottom-color:var(--color, #aaa);position:relative;line-height:calc(var(--size, 1) * 12px);margin-top:calc(var(--size, 1) * 1px);border-left:none;margin-left:0;}}@keyframes terminal-underline{ 0%, 100%{ border-bottom-color:var(--background, #000);position:relative;line-height:calc(var(--size, 1) * 12px);margin-top:calc(var(--size, 1) * 1px);border-left:none;margin-left:0;}50%{ border-bottom-color:var(--color, #aaa);position:relative;line-height:calc(var(--size, 1) * 12px);margin-top:calc(var(--size, 1) * 1px);border-left:none;margin-left:0;}}} @supports (-ms-ime-align:auto){ .terminal h1::selection, .terminal h2::selection, .terminal h3::selection, .terminal h4::selection, .terminal h5::selection, .terminal h6::selection, .terminal pre::selection, .terminal td::selection, .terminal .terminal-output div div::selection, .terminal .terminal-output div div a::selection, .terminal .terminal-output div span::selection, .cmd div::selection, .cmd > span::selection, .cmd > span span::selection, .cmd > div::selection, .cmd > div span::selection, .cmd .prompt span::selection{ background-color:rgba(170, 170, 170, 0.99);color:#000;}}</style> <script src="r/js/jquery-3.1.1.min.js"></script> <script>!function(e){function n(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function t(e,n){for(var t=[];n>0;t[--n]=e);return t.join("")}var r=function(){return r.cache.hasOwnProperty(arguments[0])||(r.cache[arguments[0]]=r.parse(arguments[0])),r.format.call(null,r.cache[arguments[0]],arguments)};r.format=function(e,i){var o,a,s,c,l,u,f,p=1,m=e.length,h="",d=[];for(a=0;a<m;a++)if("string"===(h=n(e[a])))d.push(e[a]);else if("array"===h){if(c=e[a],c[2])for(o=i[p],s=0;s<c[2].length;s++){if(!o.hasOwnProperty(c[2][s]))throw r('[sprintf] property "%s" does not exist',c[2][s]);o=o[c[2][s]]}else o=c[1]?i[c[1]]:i[p++];if(/[^s]/.test(c[8])&&"number"!==n(o))throw r("[sprintf] expecting number but found %s",n(o));switch(c[8]){case"b":o=o.toString(2);break;case"c":o=String.fromCharCode(o);break;case"d":o=parseInt(o,10);break;case"e":o=c[7]?o.toExponential(c[7]):o.toExponential();break;case"f":o=c[7]?parseFloat(o).toFixed(c[7]):parseFloat(o);break;case"o":o=o.toString(8);break;case"s":o=(o=String(o))&&c[7]?o.substring(0,c[7]):o;break;case"u":o>>>=0;break;case"x":o=o.toString(16);break;case"X":o=o.toString(16).toUpperCase()}o=/[def]/.test(c[8])&&c[3]&&o>=0?" +"+o:o,u=c[4]?"0"===c[4]?"0":c[4].charAt(1):" ",f=c[6]-String(o).length,l=c[6]?t(u,f):"",d.push(c[5]?o+l:l+o)}return d.join("")},r.cache={},r.parse=function(e){for(var n=e,t=[],r=[],i=0;n;){if(null!==(t=/^[^\x25]+/.exec(n)))r.push(t[0]);else if(null!==(t=/^\x25{2}/.exec(n)))r.push("%");else{if(null===(t=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(n)))throw"[sprintf] huh?";if(t[2]){i|=1;var o=[],a=t[2],s=[];if(null===(s=/^([a-z_][a-z_\d]*)/i.exec(a)))throw"[sprintf] huh?";for(o.push(s[1]);""!==(a=a.substring(s[0].length));)if(null!==(s=/^\.([a-z_][a-z_\d]*)/i.exec(a)))o.push(s[1]);else{if(null===(s=/^\[(\d+)\]/.exec(a)))throw"[sprintf] huh?";o.push(s[1])}t[2]=o}else i|=2;if(3===i)throw"[sprintf] mixing positional and named placeholders is not (yet) supported";r.push(t)}n=n.substring(t[0].length)}return r};var i=function(e,n,t){return t=n.slice(0),t.splice(0,0,e),r.apply(null,t)};e.sprintf=r,e.vsprintf=i}("undefined"!=typeof global?global:window),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(n,t){return void 0===t&&(t="undefined"!=typeof window?require("jquery"):require("jquery")(n)),e(t),t}:e(jQuery)}(function(e,n){"use strict";function t(){var n=e.Callbacks(),t=!1;this.resolve=function(){n.fire(),t=!0},this.add=function(e){t?e():n.add(e)}}function r(e,n){var t;if("string"==typeof e&&"string"==typeof n)return T[e]=n,!0;if("object"==typeof e&&void 0===n){for(t in e)e.hasOwnProperty(t)&&(T[t]=e[t]);return!0}return!1}function i(e,n){var t,r,i;if(t=new Date,t.setTime(t.getTime()+31536e6),r="; expires="+t.toGMTString(),"string"==typeof e&&"string"==typeof n)return document.cookie=e+"="+n+r+"; path=/",!0;if("object"==typeof e&&void 0===n){for(i in e)e.hasOwnProperty(i)&&(document.cookie=i+"="+e[i]+r+"; path=/");return!0}return!1}function o(e){return T[e]}function a(e){var n,t,r,i;for(n=e+"=",t=document.cookie.split(";"),r=0;r<t.length;r++){for(i=t[r];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(n))return i.substring(n.length,i.length)}return null}function s(e){return delete T[e]}function c(e){return i(e,"",-1)}function l(e){e.attr({role:"presentation","aria-hidden":"true"})}function u(){var n=[].slice.call(arguments),t=0;e.extend(this,{get:function(){return n},index:function(){return t},rotate:function(e){if(!e){if(!n.filter(function(e){return void 0!==e}).length)return}return 1===n.length?n[0]:(t===n.length-1?t=0:++t,void 0!==n[t]?n[t]:this.rotate(!0))},length:function(){return n.length},remove:function(e){delete n[e]},set:function(e){for(var r=n.length;r--;)if(n[r]===e)return void(t=r);this.append(e),t=n.length-1},front:function(){if(n.length){for(var e=t,r=!1;!n[e];)if(++e>n.length){if(r)break;e=0,r=!0}return n[e]}},map:function(e){return n.filter(Boolean).map(e)},forEach:function(e){n.filter(Boolean).forEach(e)},append:function(e){n.push(e)}})}function f(n){var t=n instanceof Array?n:n?[n]:[];e.extend(this,{data:function(){return t},map:function(n){return e.map(t,n)},size:function(){return t.length},pop:function(){if(0===t.length)return null;var e=t[t.length-1];return t=t.slice(0,t.length-1),e},push:function(e){return t=t.concat([e]),e},top:function(){return t.length>0?t[t.length-1]:null},clone:function(){return new f(t.slice(0))}})}function p(n,t,r){var i=!0,o="";"string"==typeof n&&""!==n&&(o=n+"_"),o+="commands";var a;r?a=[]:(a=e.Storage.get(o),a=a?JSON.parse(a):[]);var s=a.length-1;e.extend(this,{append:function(n){i&&a[a.length-1]!==n&&(a.push(n),t&&a.length>t&&(a=a.slice(-t)),s=a.length-1,r||e.Storage.set(o,JSON.stringify(a)))},set:function(n){n instanceof Array&&(a=n,r||e.Storage.set(o,JSON.stringify(a)))},data:function(){return a},reset:function(){s=a.length-1},last:function(){return a[a.length-1]},end:function(){return s===a.length-1},position:function(){return s},current:function(){return a[s]},next:function(){if(s<a.length-1&&++s,-1!==s)return a[s]},previous:function(){var e=s;if(s>0&&--s,-1!==e)return a[s]},clear:function(){a=[],this.purge()},enabled:function(){return i},enable:function(){i=!0},purge:function(){r||e.Storage.remove(o)},disable:function(){i=!1}})}function m(n){return e("<span>"+e.terminal.strip(n)+"</span>").text()}function h(n,t){var r=n.match(M)||[];if(r.length){var i=r.shift(),o=e.map(r,t),a=e.map(r,function(e){var n=e.match(/^(['"]).*\1$/);return n&&n[1]||""});return{command:n,name:i,args:o,args_quotes:a,rest:n.substring(i.length).trim()}}return{command:n,name:"",args:[],args_quotes:a,rest:""}}function d(){if(!("KeyboardEvent"in window&&"key"in window.KeyboardEvent.prototype))return!1;var e=window.KeyboardEvent.prototype;return Object.getOwnPropertyDescriptor(e,"key").get.toString().match(/\[native code\]/)}function g(e){e="[jQuery Terminal] "+e,console&&console.warn?console.warn(e):setTimeout(function(){throw new Error("WARN: "+e)},0)}function v(){var n=e('<div class="terminal temp"><div class="cmd"><span class="prompt">&nbsp;</span></div></div>').appendTo("body"),t=n.find("span")[0].getBoundingClientRect(),r={width:t.width,height:t.height};return n.remove(),r}function y(e,n){var t=e.find(".terminal-fill").width();return Math.floor(t/n.width)||1e3}function b(e,n){return Math.floor(e.find(".terminal-fill").height()/n.height)}function w(n,t){var r,i=e("<div>"+t.replace(/\n/,"<br/>")+"<div>");if(n.append(i),document.body.createTextRange)r=document.body.createTextRange(),r.moveToElementText(i[0]),r.select();else if(window.getSelection){var o=window.getSelection();o.setBaseAndExtent?o.setBaseAndExtent(i[0],0,i[0],1):document.createRange&&(r=document.createRange(),r.selectNodeContents(i[0]),o.removeAllRanges(),o.addRange(r))}try{document.execCommand("copy")}catch(e){}i.remove()}function _(e,n){return e.filter(function(e){return e[n]()===e}).length===e.length}function k(e){var n=e.split("");return _(n,"toLowerCase")?"lower":_(n,"toUpperCase")?"upper":"mixed"}function x(e){return"mixed"!==k(e)}e.omap=function(n,t){var r={};return e.each(n,function(e,i){r[e]=t.call(n,e,i)}),r},e.fn.text_length=function(){return this.map(function(){return e(this).text().length}).get().reduce(function(e,n){return e+n},0)};var T,E={clone_object:function(n){var t={};if("object"==typeof n){if(e.isArray(n))return this.clone_array(n);if(null===n)return n;for(var r in n)e.isArray(n[r])?t[r]=this.clone_array(n[r]):"object"==typeof n[r]?t[r]=this.clone_object(n[r]):t[r]=n[r]}return t},clone_array:function(n){if(!e.isFunction(Array.prototype.map))throw new Error("Your browser don't support ES5 array map use es5-shim");return n.slice(0).map(function(e){return"object"==typeof e?this.clone_object(e):e}.bind(this))}},C=function(e){return E.clone_object(e)},R=function(){try{var e=window.localStorage;return e.setItem("test","1"),e.removeItem("test"),!0}catch(e){return!1}}();(function(){try{return document.cookie.split(";"),!0}catch(e){return!1}})()||R?(T=window.localStorage,e.extend({Storage:{set:R?r:i,get:R?o:a,remove:R?s:c}})):(T={},e.extend({Storage:{set:r,get:o,remove:s}}));var S=e;S.fn.extend({everyTime:function(e,n,t,r,i){return this.each(function(){S.timer.add(this,e,n,t,r,i)})},oneTime:function(e,n,t){return this.each(function(){S.timer.add(this,e,n,t,1)})},stopTime:function(e,n){return this.each(function(){S.timer.remove(this,e,n)})}}),S.extend({timer:{guid:1,global:{},regex:/^([0-9]+)\s*(.*s)?$/,powers:{ms:1,cs:10,ds:100,s:1e3,das:1e4,hs:1e5,ks:1e6},timeParse:function(e){if(e===n||null===e)return null;var t=this.regex.exec(S.trim(e.toString()));if(t[2]){return parseInt(t[1],10)*(this.powers[t[2]]||1)}return e},add:function(e,n,t,r,i,o){var a=0;if(S.isFunction(t)&&(i||(i=r),r=t,t=n),!("number"!=typeof(n=S.timer.timeParse(n))||isNaN(n)||n<=0)){i&&i.constructor!==Number&&(o=!!i,i=0),i=i||0,o=o||!1,e.$timers||(e.$timers={}),e.$timers[t]||(e.$timers[t]={}),r.$timerID=r.$timerID||this.guid++;var s=function(){o&&s.inProgress||(s.inProgress=!0,(++a>i&&0!==i||!1===r.call(e,a))&&S.timer.remove(e,t,r),s.inProgress=!1)};s.$timerID=r.$timerID,e.$timers[t][r.$timerID]||(e.$timers[t][r.$timerID]=window.setInterval(s,n)),this.global[t]||(this.global[t]=[]),this.global[t].push(e)}},remove:function(e,n,t){var r,i=e.$timers;if(i){if(n){if(i[n]){if(t)t.$timerID&&(window.clearInterval(i[n][t.$timerID]),delete i[n][t.$timerID]);else for(var o in i[n])i[n].hasOwnProperty(o)&&(window.clearInterval(i[n][o]),delete i[n][o]);for(r in i[n])if(i[n].hasOwnProperty(r))break;r||(r=null,delete i[n])}}else for(var a in i)i.hasOwnProperty(a)&&this.remove(e,a,t);for(r in i)if(i.hasOwnProperty(r))break;r||(e.$timers=null)}}}}),/(msie) ([\w.]+)/.exec(navigator.userAgent.toLowerCase())&&S(window).one("unload",function(){var e=S.timer.global;for(var n in e)if(e.hasOwnProperty(n))for(var t=e[n],r=t.length;--r;)S.timer.remove(t[r],n)}),function(e){if(String.prototype.split.toString().match(/\[native/)){var n,t=String.prototype.split,r=void 0===/()??/.exec("")[1];n=function(e,n,i){if("[object RegExp]"!==Object.prototype.toString.call(n))return t.call(e,n,i);var o,a,s,c,l=[],u=(n.ignoreCase?"i":"")+(n.multiline?"m":"")+(n.extended?"x":"")+(n.sticky?"y":""),f=0;for(n=new RegExp(n.source,u+"g"),e+="",r||(o=new RegExp("^"+n.source+"$(?!\\s)",u)),i=void 0===i?-1>>>0:i>>>0;(a=n.exec(e))&&!((s=a.index+a[0].length)>f&&(l.push(e.slice(f,a.index)),!r&&a.length>1&&a[0].replace(o,function(){for(var e=1;e<arguments.length-2;e++)void 0===arguments[e]&&(a[e]=void 0)}),a.length>1&&a.index<e.length&&Array.prototype.push.apply(l,a.slice(1)),c=a[0].length,f=s,l.length>=i));)n.lastIndex===a.index&&n.lastIndex++;return f===e.length?!c&&n.test("")||l.push(""):l.push(e.slice(f)),l.length>i?l.slice(0,i):l},String.prototype.split=function(e,t){return n(this,e,t)}}}(),e.fn.caret=function(e){var n=this[0],t="true"===n.contentEditable;if(0===arguments.length){if(window.getSelection){if(t){n.focus();var r=window.getSelection().getRangeAt(0),i=r.cloneRange();return i.selectNodeContents(n),i.setEnd(r.endContainer,r.endOffset),i.toString().length}return n.selectionStart}if(document.selection){if(n.focus(),t){var r=document.selection.createRange(),i=document.body.createTextRange();return i.moveToElementText(n),i.setEndPoint("EndToEnd",r),i.text.length}var e=0,o=n.createTextRange(),i=document.selection.createRange().duplicate(),a=i.getBookmark();for(o.moveToBookmark(a);0!==o.moveStart("character",-1);)e++;return e}return 0}if(-1===e&&(e=this[t?"text":"val"]().length),window.getSelection)t?(n.focus(),window.getSelection().collapse(n.firstChild,e)):n.setSelectionRange(e,e);else if(document.body.createTextRange){var o=document.body.createTextRange();o.moveToElementText(n),o.moveStart("character",e),o.collapse(!0),o.select()}return t||n.focus(),e};var A=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return window.setTimeout(e,20)};e.fn.resizer=function(n){var t="unbind"===arguments[0];if(!t&&!e.isFunction(n))throw new Error('Invalid argument, it need to a function of string "unbind".');return this.each(function(){var r=e(this);if(t)e(this).removeData("callbacks").find(".resizer").remove();else if(r.data("callbacks"))e(this).data("callbacks").push(n);else{r.data("callbacks",[n]);var i=this,o=e("<div/>").addClass("resizer").appendTo(this)[0],a="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;",s="position: absolute; left: 0; top: 0; transition: 0s;";o.style.cssText=a,o.innerHTML='<div class="resize-sensor-expand" style="'+a+'"><div style="'+s+'"></div></div><div class="resize-sensor-shrink" style="'+a+'"><div style="'+s+' width: 200%; height: 200%"></div></div>';var c,l,u,f,p=o.childNodes[0],m=p.childNodes[0],h=o.childNodes[1],d=i.offsetWidth,g=i.offsetHeight,v=function(){m.style.width="100000px",m.style.height="100000px",p.scrollLeft=1e5,p.scrollTop=1e5,h.scrollLeft=1e5,h.scrollTop=1e5};v();var y=function(){if(l=0,c){d=u,g=f;var e=r.data("callbacks");e&&e.length&&e.forEach(function(e){e()})}},b=function(){u=i.offsetWidth,f=i.offsetHeight,c=u!==d||f!==g,c&&!l&&(l=A(y)),v()};e(p).on("scroll",b),e(h).on("scroll",b)}})};var F=0;e.fn.cmd=function(t){function r(n){var t=e(n.target);if(t.is("span"))return t.index()+t.closest('[role="presentation"]').prevUntil(".prompt").text_length()}function i(e){if(e.key){var n=e.key.toUpperCase();if("CONTROL"===n)return"CTRL";var t=[];return e.ctrlKey&&t.push("CTRL"),e.metaKey&&"META"!==n&&t.push("META"),e.shiftKey&&"SHIFT"!==n&&t.push("SHIFT"),e.altKey&&"ALT"!==n&&t.push("ALT"),e.key&&("DEL"===n?t.push("DELETE"):t.push(n)),t.join("+")}}function o(){return!0}function a(){return U.val(""),ve=0,D.isenabled()&&!U.is(":focus")&&U.trigger("focus",[!0]),U.one("input",z),!0}function s(){return xe?(Y=fe,D.set(re.current())):D.set(re.previous()),xe=!1,!1}function c(){return D.set(re.end()?Y:re.next()),!1}function u(){me>0&&(D.position(-1,!0),we())}function f(){return me<fe.length&&D.position(1,!0),!1}function h(){D.position(0)}function g(){D.position(fe.length)}function v(){var e=U.is(":focus");ne?D.oneTime(10,function(){!U.is(":focus")&&ne&&U.trigger("focus",[!0])}):!e||!Z&&ne||U.trigger("blur",[!0])}function y(e){D.oneTime(10,function(){U.val()===fe||e||U.val(fe),ne&&D.oneTime(10,function(){try{U.caret(me)}catch(e){}})})}function b(){ge.toggleClass("inverted")}function _(){G="(reverse-i-search)`"+ce+"': ",_e()}function k(){G=J,se=!1,le=null,ce=""}function x(n){var t,r,i=re.data(),o=i.length;if(n&&le>0&&(o-=le),ce.length>0)for(var a=ce.length;a>0;a--){r=e.terminal.escape_regex(ce.substring(0,a)),t=new RegExp(r);for(var s=o;s--;)if(t.test(i[s]))return le=i.length-s,D.position(i[s].indexOf(r)),D.set(i[s],!0),we(),void(ce.length!==a&&(ce=ce.substring(0,a),_()))}ce=""}function T(){var e=D.find(".prompt").text("&nbsp;"),n=D.width(),t=e[0].getBoundingClientRect().width;W=Math.floor(n/t),_e()}function E(n){function t(n){return e.terminal.split_equal(n,W)}var r,i=ae.text(),o=new RegExp("^"+e.terminal.escape_regex(i));if(n.match(/\n/)){for(var a=n.split("\n"),s=W-K-1,c=0;c<a.length-1;++c)a[c]+=" ";for(Q(a[0])>s?(r=t(i+a[0]),r[0]=r[0].replace(o,"")):r=[a[0]],c=1;c<a.length;++c)a[c].length>W?r=r.concat(t(a[c])):r.push(a[c])}else r=t(i+n),r[0]=r[0].replace(o,"");return r}function C(n){n=e.terminal.escape_formatting(n);try{return e.terminal.apply_formatters(n)}catch(e){alert(e.message+"\n"+(e.stack?e.stack:e))}}function R(n){return e.terminal.format(e.terminal.encode(S(n)))}function S(n){for(var t=[],r=e.terminal.length(n),i=0;i<r;++i){var o=e.terminal.substring(n,i,i+1);e.terminal.is_formatting(o)?t.push(o):t.push("[[;;]"+o+"]")}return t.join("")}function A(n){return e.terminal.length(n)}function L(n,t){for(var r,i=e.terminal.length(n),o=e.terminal.length(t),a=o;a>1;a--)for(var s=e.terminal.substring(t,0,a),c=C(s),l=i;l>1;l--){var u=e.terminal.substring(n,0,l);u===c&&function(e){return r&&A(e)>A(r)||!r}(s)&&(r=s)}return r||""}function j(n){for(var t=0===n?0:n-1,r=e.terminal.length(fe),i=t;i<r-1;++i){var o=e.terminal.substring(fe,0,i),a=e.terminal.substring(fe,0,i+1),s=C(o),c=C(a),l=A(s),u=A(c);if(Math.abs(u-l)>1)return i}}function O(n){var t=n,r=C(fe),i=e.terminal.length(r);if(i!==e.terminal.length(fe)){var o=e.terminal.substring(fe,0,n),a=e.terminal.length(o),s=C(o),c=e.terminal.length(s),l=(Math.abs(a-c),j(n)),u=e.terminal.substring(fe,0,l+1);if(t-=a-c,o&&o!==u){var f=C(u),p=L(f,o);if(p&&o!==p){var m=new RegExp("^"+e.terminal.escape_regex(p)),h=u.replace(m,""),d=A(C(h));t=A(C(p))+d}}t>i?t=i:t<0&&(t=0)}return t}function z(){ve++>0||D.isenabled()&&D.oneTime(100,function(){D.insert(U.val()),U.val(fe),y()})}function I(){e.isFunction(t.onCommandChange)&&t.onCommandChange(fe)}function P(r){H('keydown "'+r.key+'" '+r.fake+" "+r.which),Le="process"===(r.key||"").toLowerCase()||0===r.which;var o;Ee=Re&&Ce;try{r.fake||(Ce=r.key&&1===r.key.length&&!r.ctrlKey,Se="unidentified"===String(r.key).toLowerCase(),Fe="BACKSPACE"===r.key.toUpperCase()||8===r.which)}catch(e){}if("Unidentified"===r.key)return void(Ae=!0);r.fake||(Re=!0,Ae=!1),U.off("input",z);var a=i(r);if(e.isFunction(t.keydown)&&(o=t.keydown(r))!==n)return o||(ke=!0),o;if(ne)if(ke=-1!==["CTRL+V","META+V"].indexOf(a),38===r.which||80===r.which&&r.ctrlKey||(xe=!0),!se||35!==r.which&&36!==r.which&&37!==r.which&&38!==r.which&&39!==r.which&&40!==r.which&&13!==r.which&&27!==r.which){if(!e.isFunction(oe[a]))return r.altKey?void 0:void(Te=!1);if(!0===(o=oe[a]()))return;if(o!==n)return o}else k(),_e(),27===r.which&&D.set(""),we(),P.call(this,r)}function N(r){H('keypress "'+r.key+'" '+r.fake);var i;if(r.fake||(Re=!1),(!r.ctrlKey&&!r.metaKey||r.altKey)&&!Te){if(e.isFunction(t.keypress)&&(i=t.keypress(r))!==n)return i||(ke=!0),i;if(ne){if(r.fake)return;var o;if((d()||r.fake)&&(o=r.key),o&&!Se||(o=String.fromCharCode(r.which)),"SPACEBAR"===o.toUpperCase()&&(o=" "),e.inArray(r.which,[13,0,8])>-1){if(123===r.keyCode)return;return!1}!o||!(!r.ctrlKey||r.ctrlKey&&r.ctrlKey)||r.altKey&&100===r.which&&!r.altKey||Ee||(se?(ce+=o,x(),_()):D.insert(o))}}}function $(n,t,r){var i=e.Event(n);i.which=r,i.key=t,i.fake=!0,Oe.trigger(i)}function H(e){}function q(e){H("input "+Ae+" || "+Le+" (("+Re+" || "+Ee+") && !"+ke+" && ("+Ce+" || "+Se+") && !"+Fe+")"),H(JSON.stringify({data:e.originalEvent.data,inputType:e.originalEvent.data}));var n=U.val();if((Ae||Le||(Re||Ee)&&!ke&&(Ce||Se)&&!Fe)&&n!==fe){var t=me;if(Ae){var r=je;Fe=r.substring(0,r.length-1).length===n.length}if(se)ce=n,x(),_();else{var i=n.substring(me);if(1===i.length||Fe){if(Ae){var o;o=Fe?8:i.toUpperCase().charCodeAt(0),$("keydown",Fe?"Backspace":i,o)}Re&&!Fe&&$("keypress",i,i.charCodeAt(0))}if(Fe)return void(je=fe);if(ke)return void(ke=!1);D.set(n)}Fe?D.position(t-1):D.position(t+Math.abs(n.length-je.length))}je=fe,ke=!1,Ae=!0}var D=this,M=D.data("cmd");if(M)return M;var B=F++;D.addClass("cmd"),D.append('<span class="prompt"></span><span></span><span class="cursor">&nbsp;</span><span></span>'),l(D.find("span").not(":eq(0)"));var U=e("<textarea>").attr({autocapitalize:"off",spellcheck:"false",tabindex:1}).addClass("clipboard").appendTo(D);t.width&&D.width(t.width);var W,K,J,Y,G,ne,te,re,ie,oe,ae=D.find(".prompt"),se=!1,ce="",le=null,ue=t.mask||!1,fe="",pe="",me=0,he=0,de=t.historySize||60,ge=D.find(".cursor"),ve=0,ye={"ALT+D":function(){return D.set(fe.slice(0,me)+fe.slice(me).replace(/ *[^ ]+ *(?= )|[^ ]+$/,""),!0),!1},ENTER:function(){(re&&fe&&!ue&&e.isFunction(t.historyFilter)&&t.historyFilter(fe)||t.historyFilter instanceof RegExp&&fe.match(t.historyFilter)||!t.historyFilter)&&re.append(fe);var n=fe;return re.reset(),je="",Ae=!0,D.set(""),t.commands&&t.commands(n),e.isFunction(G)&&_e(),U.val(""),!1},"SHIFT+ENTER":function(){return D.insert("\n"),!0},BACKSPACE:function(){se?(ce=ce.slice(0,-1),_()):""!==fe&&me>0&&D.delete(-1),D.oneTime(1,function(){Ae=!0})},TAB:function(){D.insert("\t")},"CTRL+D":function(){return D.delete(1),!1},DELETE:function(){return D.delete(1),!0},ARROWUP:s,UP:s,"CTRL+P":s,ARROWDOWN:c,DOWN:c,"CTRL+N":c,ARROWLEFT:u,LEFT:u,"CTRL+B":u,"CTRL+ARROWLEFT":function(){var e=me-1,n=0;" "===fe[e]&&--e;for(var t=e;t>0;--t){if(" "===fe[t]&&" "!==fe[t+1]){n=t+1;break}if("\n"===fe[t]&&"\n"!==fe[t+1]){n=t;break}}D.position(n)},"CTRL+R":function(){return se?x(!0):(J=G,_(),Y=fe,D.set(""),we(),se=!0),!1},"CTRL+G":function(){if(se)return G=J,_e(),D.set(Y),we(),se=!1,ce="",!1},ARROWRIGHT:f,"CTRL+F":f,RIGHT:f,"CTRL+ARROWRIGHT":function(){" "===fe[me]&&++me;var e=/\S[\n\s]{2,}|[\n\s]+\S?/,n=fe.slice(me).match(e);!n||n[0].match(/^\s+$/)?D.position(fe.length):" "!==n[0][0]?me+=n.index+1:(me+=n.index+n[0].length-1," "!==n[0][n[0].length-1]&&--me),we()},F12:o,END:g,"CTRL+E":g,HOME:h,"CTRL+A":h,"SHIFT+INSERT":a,"CTRL+SHIFT+T":o,"CTRL+W":function(){if(""!==fe&&0!==me){var e=fe.slice(0,me).match(/([^ ]+ *$)/);e[0].length&&(pe=D.delete(-e[0].length),w(D,pe))}return!1},"CTRL+H":function(){return""!==fe&&me>0&&D.delete(-1),!1},"CTRL+X":o,"CTRL+C":o,"CTRL+T":o,"CTRL+Y":function(){""!==pe&&D.insert(pe)},"CTRL+V":a,"META+V":a,"CTRL+K":function(){return fe.length-me&&(pe=D.delete(fe.length-me),w(D,pe)),!1},"CTRL+U":function(){return""!==fe&&0!==me&&(pe=D.delete(-me),w(D,pe)),!1},"CTRL+TAB":function(){return!1},"META+`":o,"META+R":o,"META+L":o};if(X&&!V)ie=function(e){e?ge.addClass("blink"):ge.removeClass("blink")};else{var be=!1;ie=function(e){e&&!be?(be=!0,ge.addClass("inverted blink"),D.everyTime(500,"blink",b)):be&&!e&&(be=!1,D.stopTime("blink",b),ge.removeClass("inverted blink"))}}var we=function(){function t(n,t,r){return e.terminal.substring(n,t,r)}function r(n,r){if(r===e.terminal.length(n))s.html(R(n)),ge.html("&nbsp;"),c.html("");else if(0===r)s.html(""),ge.html(R(t(n,0,1))),c.html(R(t(n,1)));else{var i=t(n,0,r);s.html(R(i));var o=t(n,r,r+1);ge.html(R(o)),r===n.length-1?c.html(""):c.html(R(t(n,r+1)))}}function i(e){return'<div role="presentation">'+R(e)+"</div>"}function o(n){var t=c;e.each(n,function(n,r){t=e(i(r)).insertAfter(t)})}function a(n){e.each(n,function(e,n){s.before(i(n))})}var s=ge.prev(),c=ge.next();return function(){var t;switch(typeof ue){case"boolean":t=ue?fe.replace(/./g,"*"):fe;break;case"string":t=fe.replace(/./g,ue)}var l=he;t=C(t.replace(/</g,"&#60;").replace(/>/g,"&#62;"));var u;if(D.find("div").remove(),s.html(""),Q(m(t))>W-K-1||t.match(/\n/)){var f=t.match(/\t/g),p=f?3*f.length:0;f&&(t=t.replace(/\t/g,"\0\0\0\0"));var h=E(t);f&&(h=e.map(h,function(e){return e.replace(/\x00\x00\x00\x00/g,"\t")}));var d=e.terminal.length(h[0]);if(0===d&&1===h.length);else if(l<d)r(h[0],l),o(h.slice(1));else if(l===d)s.before(i(h[0])),r(h[1]||"",0),h.length>1&&o(h.slice(2));else{var g=h.length;if(l<d)r(h[0],l),o(h.slice(1));else if(l===d)s.before(i(h[0])),r(h[1],0),o(h.slice(2));else{var v=h.slice(-1)[0],y=e.terminal.length(t),b=y-l-p,w=e.terminal.length(v),_=0;if(-1===b&&(b=0),b<=w)a(h.slice(0,-1)),_=w===b?0:w-b,r(v,_);else if(3===g){var k=R(h[0]);s.before('<div role="presentation">'+k+"</div>"),r(h[1],l-d-1),k=R(C(h[2])),c.after('<div role="presentation">'+k+"</div>")}else{var x,T;for(_=l,u=0;u<h.length;++u){var S=e.terminal.length(h[u]);if(!(_>S))break;_-=S}if(T=h[u],x=u,_===T.length&&(_=0,(T=h[++x])===n)){var A=e.terminal.defaults.strings.redrawError;throw new Error(A)}r(T,_),a(h.slice(0,x)),o(h.slice(x+1))}}}}else""===t?(s.html(""),ge.html("&nbsp;"),c.html("")):r(t,l)}}(),_e=function(){function n(n){var t=e.terminal.split_equal(e.terminal.encode(n),W),r=e.terminal.format(t[t.length-1]),i=t.slice(0,-1).map(function(n){return'<span class="line">'+e.terminal.format(n)+"</span>"}).concat([r]).join("\n");ae.html(i),K=Q(e("<span>"+r+"</span>").text())}return function(){switch(typeof G){case"string":n(G);break;case"function":G(n)}}}();e.extend(D,{name:function(e){if(e!==n){te=e;var r=re&&re.enabled()||!re;return re=new p(e,de,"memory"===t.history),r||re.disable(),D}return te},purge:function(){return re.clear(),D},history:function(){return re},delete:function(e,n){var t;return 0===e?D:(e<0?me>0&&(t=fe.slice(0,me).slice(e),fe=fe.slice(0,me+e)+fe.slice(me,fe.length),n||D.position(me+e),I()):""!==fe&&me<fe.length&&(t=fe.slice(me).slice(0,e),fe=fe.slice(0,me)+fe.slice(me+e,fe.length),I()),we(),y(),t)},set:function(e,t){return e!==n&&(fe=e,t||D.position(fe.length),we(),y(),I()),D},keymap:function(n){return void 0===n?oe:(oe=e.extend({},ye,e.omap(n||{},function(e,n){return function(t){return n(t,ye[e])}})),D)},insert:function(e,n){return me===fe.length?fe+=e:fe=0===me?e+fe:fe.slice(0,me)+e+fe.slice(me),n?y():D.position(e.length,!0),we(),I(),y(),D},get:function(){return fe},commands:function(e){return e?(t.commands=e,D):e},destroy:function(){return Oe.unbind("keypress.cmd",N),Oe.unbind("keydown.cmd",P),Oe.unbind("input.cmd",q),D.stopTime("blink",b),D.find(".cursor").next().remove().end().prev().remove().end().remove(),D.find(".prompt, .clipboard").remove(),D.removeClass("cmd").removeData("cmd").off(".cmd"),D},prompt:function(e){if(e===n)return G;if("string"!=typeof e&&"function"!=typeof e)throw new Error("prompt must be a function or string");return G=e,_e(),we(),D},kill_text:function(){return pe},position:function(n,r){return"number"==typeof n?(r?me+=n:me=n<0?0:n>fe.length?fe.length:n,he=O(me),e.isFunction(t.onPositionChange)&&t.onPositionChange(me),we(),y(!0),D):me},display_position:function(t,r){if(t===n)return he;var i=C(fe),o=e.terminal.length(i),a=e.terminal.length(fe);if(o===a)return D.position(t);var s;s=r?he+t:t>o?o:t;for(var c=0;c<a;++c)if(s===O(c))return D.position(c)},visible:function(){var e=D.visible;return function(){e.apply(D,[]),we(),_e()}}(),show:function(){var e=D.show;return function(){e.apply(D,[]),we(),_e()}}(),resize:function(e){return e?W=e:T(),we(),_e(),D},enable:function(){if(!ne){ne=!0,D.addClass("enabled");try{U.caret(me)}catch(e){}ie(!0),_e()}return v(),D},isenabled:function(){return ne},disable:function(e){return ne=!1,D.removeClass("enabled"),ie(!1),e||v(),D},mask:function(e){return void 0===e?ue:(ue=e,we(),D)}}),D.name(t.name||t.prompt||""),G="string"==typeof t.prompt?t.prompt:"> ",_e(),t.enabled!==n&&!0!==t.enabled||D.enable(),t.history||re.disable();var ke,xe=!0,Te=!1,Ee=!1,Ce=!1,Re=!1,Se=!1,Ae=!0,Fe=!1,Le=!1,je="",Oe=e(document.documentElement||window);return D.keymap(t.keymap||{}),Oe.bind("keypress.cmd",N).bind("keydown.cmd",P).bind("input.cmd",q),function(){var n=!1,i=0;D.on("mousedown.cmd",function(){n=!0}).on("mouseup.cmd",function(o){if(""===ee()){var a="click_"+B;if(1==++i){var s=n;ne?D.oneTime(t.clickTimeout,a,function(){!e(o.target).is(".prompt")&&s&&ne&&(e(o.target).is(".cmd")?D.position(fe.length):D.display_position(r(o))),i=0}):i=0}else D.stopTime(a),i=0}n=!1})}(),D.data("cmd",D),"KeyboardEvent"in window&&"key"in window.KeyboardEvent.prototype||setTimeout(function(){throw new Error("key event property not supported try https://github.com/cvan/keyboardevent-key-polyfill")},0),D};var L=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i,j=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,O=/(\[\[[!gbiuso]*;[^;]*;[^\]]*\](?:[^\]]*\\\][^\]]*|[^\]]*|[^[]*\[[^\]]*)\]?)/i,z=/\[\[([!gbiuso]*);([^;]*);([^;\]]*);?([^;\]]*);?([^\]]*)\]([^\]]*\\\][^\]]*|[^\]]*|[^[]*\[[^\]]*)\]?/gi,I=/\[\[([!gbiuso]*;[^;\]]*;[^;\]]*(?:;|[^\]()]*);?[^\]]*)\]([^\]]*\\\][^\]]*|[^\]]*|[^[]*\[[^\]]*)\]?/gi,P=/\[\[([!gbiuso]*;[^;\]]*;[^;\]]*(?:;|[^\]()]*);?[^\]]*)\]([^\]]*\\\][^\]]*|[^\]]*|[^[]*\[[^\]]*)\]/gi,N=/^\[\[([!gbiuso]*;[^;\]]*;[^;\]]*(?:;|[^\]()]*);?[^\]]*)\]([^\]]*\\\][^\]]*|[^\]]*|[^[]*\[[^\]]*)\]$/gi,$=/^#([0-9a-f]{3}|[0-9a-f]{6})$/i,H=/(\bhttps?:\/\/(?:(?:(?!&[^;]+;)|(?=&amp;))[^\s"'<>\][)])+\b)/gi,q=/\b(https?:\/\/(?:(?:(?!&[^;]+;)|(?=&amp;))[^\s"'<>\][)])+)\b(?![^[\]]*])/gi,D=/((([^<>('")[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,})))/g,M=/((?:"[^"\\]*(?:\\[\S\s][^"\\]*)*"|'[^'\\]*(?:\\[\S\s][^'\\]*)*'|\/[^\/\\]*(?:\\[\S\s][^\/\\]*)*\/[gimy]*(?=\s|$)|(?:\\\s|\S))+)(?=\s|$)/gi,B=/(\[\[[!gbiuso]*;[^;]*;[^\]]*\])/i,U=/^(\[\[[!gbiuso]*;[^;]*;[^\]]*\])/i,W=/\[\[[!gbiuso]*;[^;]*;[^\]]*\]?$/i,K=/(\[\[(?:[^\]]|\\\])+\]\])/,J=/^[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?$/,Y=/^\/((?:\\\/|[^\/]|\[[^\]]*\/[^\]]*\])+)\/([gimy]*)$/,G=/^(?=((?:[^"']+|"[^"\\]*(?:\\[^][^"\\]*)*"|'[^'\\]*(?:\\[^][^'\\]*)*')*))\1./,X=function(){var e=!1,t="Webkit Moz O ms Khtml".split(" "),r=document.createElement("div");if(r.style.animationName&&(e=!0),!1===e)for(var i=0;i<t.length;i++){var o=t[i]+"AnimationName";if(r.style[o]!==n){e=!0;break}}return e}(),V=-1!==navigator.userAgent.toLowerCase().indexOf("android"),Q=function(){return"undefined"==typeof wcwidth?function(e){return e.length}:wcwidth}(),Z=function(e){var n=!1;return(L.test(e)||j.test(e.substr(0,4)))&&(n=!0),n}(navigator.userAgent||navigator.vendor||window.opera),ee=function(){return window.getSelection||document.getSelection?function(){var e=(window.getSelection||document.getSelection)();return e.text?e.text:e.toString()}:document.selection&&"Control"!==document.selection.type?function(){return document.selection.createRange().text}:function(){return""}}();e.terminal={version:"1.9.0",
color_names:["transparent","currentcolor","black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],Cycle:u,History:p,Stack:f,valid_color:function(n){return!!n.match($)||-1!==e.inArray(n.toLowerCase(),e.terminal.color_names)},unclosed_strings:function(e){return!!e.match(G)},escape_regex:function(e){if("string"==typeof e){var n=/([-\\^$[\]()+{}?*.|])/g;return e.replace(n,"\\$1")}},have_formatting:function(e){return"string"==typeof e&&!!e.match(P)},is_formatting:function(e){return"string"==typeof e&&!!e.match(N)},format_split:function(e){return e.split(O).filter(Boolean)},iterate_formatting:function(e,t){for(var r,i,o=!1,a=!1,s=0,c=-1,l=0,u=0;u<e.length;u++){r=e.substring(u).match(U),r?(o=r[1],a=!1):o?"]"===e[u]&&(a?(o="",a=!1):a=!0):a=!0;var f=o&&a||!o,p="["===e[u]&&"["===e[u+1];(function(n){return"&nbsp;"===e.substring(n-6,n)||e.substring(n-1,n).match(/\s/)})(u)&&(f||p)&&(-1===c&&i!==u||-1!==c)&&(c=u);var m=e[u].match(/[[\]]/);if(f)if("&"===e[u]){if(r=function(n){return e.substring(n).match(/^(&[^;]+;)/)}(u)){u+=r[1].length-2;continue}++s,++l}else"]"===e[u]&&"\\"===e[u-1]?(--s,--l):m||(++s,++l);if(!m&&f){2===Q(e[u])&&l++;var h={count:s,index:u,formatting:o,length:l,text:a,space:c},d=t(h);if(!1===d)break;d&&(d.count!==n&&(s=d.count),d.length!==n&&(l=d.length),d.space!==n&&(i=c,c=d.space),d.index!==n&&(u=d.index))}}},substring:function(n,t,r){if(""===e("<span>"+e.terminal.strip(n)+"</span>").text().substring(t,r))return"";var i,o,a=n.length,s="",c="";return e.terminal.iterate_formatting(n,function(e){t&&e.count===t+1&&(i=e.index,e.formatting&&(s=e.formatting)),r&&e.count===r+1&&(a=e.index,e.formatting&&(a=o+1)),r&&e.count===r&&(c=e.formatting,o=e.index)}),n=s+n.substring(i,a),c&&(n=n.replace(/(\[\[^\]]+)?\]$/,""),n+="]"),n},normalize:function(e){return e.replace(I,function(e,n,t){if(""===t)return"";var r=n.match(/;/g).length;if(r>=4){var i=n.split(/;/);return"[["+i.slice(0,4).join(";")+";"+(i.slice(4).join(";")||t)+"]"+t+"]"}return r=2===r?";;":3===r?";":"","[["+n+r+t.replace(/\\\]/g,"&#93;").replace(/\n/g,"\\n").replace(/&nbsp;/g," ")+"]"+t+"]"})},split_equal:function(n,t,r){for(var i="",o=[],a=e.terminal.normalize(n).split(/\n/g),s=0,c=a.length;s<c;++s)if(""!==a[s]){var l,u=a[s],f=0,p=u.length;e.terminal.iterate_formatting(u,function(n){var a=n.index===p-2&&"]"===u[n.index+1],s=n.index===p-1||a;if(n.length>=t||s||n.length===t-1&&2===Q(u[n.index+1])){var c=!1;if(r&&-1!==n.space){var m=e.terminal.strip(u.substring(n.space));m=e("<span>"+m+"</span>").text();var h=m.length,d=n.index+t+1;m=m.substring(0,d),(m.match(/\s|&nbsp;/)||d>h)&&(c=!0)}if(r&&!a&&-1!==n.space&&n.index!==p-1&&c){l=u.substring(f,n.space);var g=n.space-1}else l=u.substring(f,n.index+1);if(r&&(l=l.replace(/^(&nbsp;|\s)+|(&nbsp;|\s)+$/g,"")),f=(g||n.index)+1,i){var v=l.match(/^[^\]]*\]/);l=i+l,v&&(i="")}a&&(l+="]",i="");var y=l.match(I);if(y){var b=y[y.length-1];"]"!==b[b.length-1]?(i=b.match(B)[1],l+="]"):l.match(W)&&(l=l.replace(W,""),i=b.match(B)[1])}return o.push(l),{index:g,length:0,space:-1}}})}else o.push("");return o},amp:function(e){return e.replace(/&(?!#[0-9]+;|[a-zA-Z]+;)/g,"&amp;")},encode:function(n){return e.terminal.amp(n).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ /g,"&nbsp;").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;")},nested_formatting:function(n){if(!e.terminal.have_formatting(n))return n;var t=[],r=/(\[\[(?:[^\]]|\\\])+\](?:[^\][]|\\\])*\]?)/,i=/(\[\[(?:[^\]]|\\\])+\])[\s\S]*/;return n.split(r).filter(Boolean).map(function(n){if(n.match(/^\[\[/))e.terminal.is_formatting(n)||(n+="]",t.push(n.replace(i,"$1")));else{var r=!1;n.match(/\]/)&&(r=!0),t.length&&(n=t[t.length-1]+n),r?t.pop():t.length&&(n+="]")}return n}).join("")},escape_formatting:function(n){return e.terminal.escape_brackets(n)},apply_formatters:function(n){var t=e.terminal.defaults.formatters;return e.terminal.format_split(n).map(function(n){if(e.terminal.is_formatting(n))return n;for(var r=0;r<t.length;++r)try{if("function"==typeof t[r]){var i=t[r](n);"string"==typeof i&&(n=i)}}catch(e){throw new Error("Error in formatter ["+r+"]")}return n}).join("")},format:function(n,t){var r=e.extend({},{linksNoReferrer:!1},t||{});if("string"==typeof n){var i=e.terminal.format_split(n);return n=e.map(i,function(n){return""===n?n:e.terminal.is_formatting(n)?(n=n.replace(/\[\[[^\]]+\]/,function(e){return e.replace(/&nbsp;/g," ")}),n.replace(z,function(n,t,i,o,a,s,c){if(""===c)return"";c=c.replace(/\\]/g,"]");var l="";-1!==t.indexOf("b")&&(l+="font-weight:bold;");var u=[];-1!==t.indexOf("u")&&u.push("underline"),-1!==t.indexOf("s")&&u.push("line-through"),-1!==t.indexOf("o")&&u.push("overline"),u.length&&(l+="text-decoration:"+u.join(" ")+";"),-1!==t.indexOf("i")&&(l+="font-style:italic;"),e.terminal.valid_color(i)&&(l+="color:"+i+";",-1!==t.indexOf("g")&&(l+="text-shadow:0 0 5px "+i+";")),e.terminal.valid_color(o)&&(l+="background-color:"+o);var f;f=""===s?c:s.replace(/&#93;/g,"]");var p;return-1!==t.indexOf("!")?(f.match(D)?p='<a href="mailto:'+f+'"':(p='<a target="_blank" href="'+f+'"',r.linksNoReferrer?p+=' rel="noreferrer noopener"':p+=' rel="noopener"'),p+=' tabindex="1000"'):p="<span",""!==l&&(p+=' style="'+l+'"'),""!==a&&(p+=' class="'+a+'"'),-1!==t.indexOf("!")?p+=">"+c+"</a>":p+=' data-text="'+f.replace('"',"&quote;")+'">'+c+"</span>",p})):"<span>"+n.replace(/\\\]/g,"]")+"</span>"}).join(""),n.replace(/<span><br\s*\/?><\/span>/gi,"<br/>")}return""},escape_brackets:function(e){return e.replace(/\[/g,"&#91;").replace(/\]/g,"&#93;")},length:function(e){return m(e).length},columns:function(e,n,t){function r(n){var t=new Array(o-e[n].length).join(" ");a.push(e[n]+(n%s==0?"":t))}var i=e.map(function(e){return e.length}),o=Math.max.apply(null,i)+t;void 0===t&&(t=4);var a,s=Math.floor(n/o),c=[];if(s<2)return e.join("\n");for(var l=0;l<e.length;++l)l%s==0?(a&&(r(l),c.push(a.join(""))),a=[]):r(l);return c.join("\n")},strip:function(e){return e=e.replace(z,"$6"),e.replace(/(\\?)([[\]])/g,function(e,n){return n?e:""})},active:function(){return ue.front()},last_id:function(){var e=ue.length();if(e)return e-1},parse_argument:function(e,n){function t(e){if(e.match(/^['"]/)){var n=e[0],t=new RegExp("((^|[^\\\\])(?:\\\\\\\\)*)"+n,"g");e=e.replace(t,"$1")}return JSON.parse('"'+e+'"')}if(!1===n)return"'"===e[0]&&"'"===e[e.length-1]?e.replace(/^'|'$/g,""):'"'===e[0]&&'"'===e[e.length-1]?e.replace(/^"|"$/g,"").replace(/\\([" ])/g,"$1"):e.match(/\/.*\/[gimy]*$/)?e:e.match(/['"]]/)?t(e):e.replace(/\\ /g," ");var r=e.match(Y);return r?new RegExp(r[1],r[2]):e.match(/['"]/)?t(e):e.match(/^-?[0-9]+$/)?parseInt(e,10):e.match(J)?parseFloat(e):e.replace(/\\(['"() ])/g,"$1")},parse_arguments:function(n){return e.map(n.match(M)||[],e.terminal.parse_argument)},split_arguments:function(n){return e.map(n.match(M)||[],function(n){return e.terminal.parse_argument(n,!1)})},parse_command:function(n){return h(n,e.terminal.parse_argument)},split_command:function(n){return h(n,function(n){return e.terminal.parse_argument(n,!1)})},extended_command:function(e,n){try{pe=!1,e.exec(n,!0).done(function(){pe=!0})}catch(e){}},formatter:new function(){try{this[Symbol.split]=function(n){return e.terminal.format_split(n)},this[Symbol.match]=function(e){return e.match(I)},this[Symbol.replace]=function(e,n){return e.replace(z,n)},this[Symbol.search]=function(e){return e.search(I)}}catch(e){}}},e.fn.visible=function(){return this.css("visibility","visible")},e.fn.hidden=function(){return this.css("visibility","hidden")},e.fn.scroll_element=function(){var n=e.fn.scroll_element.defaults;return this.map(function(){if(e(this).is("body")){var t=e("html"),r=e("body"),i=r.scrollTop()||t.scrollTop(),o=e("<pre/>").css(n.pre).appendTo("body");o.html(new Array(n.lines).join("\n")),e("body,html").scrollTop(10);var a;return 10===r.scrollTop()?(r.scrollTop(i),a=r[0]):10===t.scrollTop()&&(t.scrollTop(i),a=t[0]),o.remove(),a}return this})},e.fn.scroll_element.defaults={lines:2e3,pre:{"font-size":"100px","white-space":"pre"}};var ne={};e.jrpc=function(n,t,r,i,o){function a(n){return e.isNumeric(n.id)&&(void 0!==n.result||void 0!==n.error)}var s;s=e.isPlainObject(n)?n:{url:n,method:t,params:r,success:i,error:o},ne[s.url]=ne[s.url]||0;var c={jsonrpc:"2.0",method:s.method,params:s.params,id:++ne[s.url]};return e.ajax({url:s.url,beforeSend:function(n,t){e.isFunction(s.request)&&s.request(n,c),t.data=JSON.stringify(c)},success:function(n,t,r){r.getResponseHeader("Content-Type").match(/(application|text)\/json/)||g("Response Content-Type is neither application/json nor text/json");var i;try{i=JSON.parse(n)}catch(e){if(!s.error)throw new Error("Invalid JSON");return void s.error(r,"Invalid JSON",e)}if(e.isFunction(s.response)&&s.response(r,i),a(i)||"system.describe"===s.method)s.success(i,t,r);else{if(!s.error)throw new Error("Invalid JSON-RPC");s.error(r,"Invalid JSON-RPC")}},error:s.error,contentType:"application/json",dataType:"text",async:!0,cache:!1,type:"POST"})};var te=!e.terminal.version.match(/^\{\{/),re="Copyright (c) 2011-2017 Jakub Jankiewicz <http://jcubic.pl/me>",ie=te?" v. "+e.terminal.version:" ",oe=new RegExp(" {"+ie.length+"}$"),ae="jQuery Terminal Emulator"+(te?ie:""),se=[["jQuery Terminal","(c) 2011-2017 jcubic"],[ae,re.replace(/^Copyright | *<.*>/g,"")],[ae,re.replace(/^Copyright /,"")],["      _______                 ________                        __","     / / _  /_ ____________ _/__  ___/______________  _____  / /"," __ / / // / // / _  / _/ // / / / _  / _/     / /  \\/ / _ \\/ /","/  / / // / // / ___/ // // / / / ___/ // / / / / /\\  / // / /__","\\___/____ \\\\__/____/_/ \\__ / /_/____/_//_/_/_/ /_/  \\/\\__\\_\\___/","         \\/          /____/                                   ".replace(oe," ")+ie,re],["      __ _____                     ________                              __","     / // _  /__ __ _____ ___ __ _/__  ___/__ ___ ______ __ __  __ ___  / /"," __ / // // // // // _  // _// // / / // _  // _//     // //  \\/ // _ \\/ /","/  / // // // // // ___// / / // / / // ___// / / / / // // /\\  // // / /__","\\___//____ \\\\___//____//_/ _\\_  / /_//____//_/ /_/ /_//_//_/ /_/ \\__\\_\\___/","          \\/              /____/                                          ".replace(oe,"")+ie,re]];e.terminal.defaults={prompt:"> ",history:!0,exit:!0,clear:!0,enabled:!0,maskChar:"*",wrap:!0,checkArity:!0,raw:!1,exceptionHandler:null,pauseEvents:!0,softPause:!1,memory:!1,cancelableAjax:!0,processArguments:!0,linksNoReferrer:!1,processRPCResponse:null,completionEscape:!0,convertLinks:!0,extra:{},tabs:4,historySize:60,historyState:!1,importHistory:!1,historyFilter:null,echoCommand:!0,scrollOnEcho:!0,login:null,outputLimit:-1,formatters:[e.terminal.nested_formatting],onAjaxError:null,pasteImage:!0,scrollBottomOffset:20,wordAutocomplete:!0,caseSensitiveAutocomplete:!0,clickTimeout:200,request:e.noop,response:e.noop,describe:"procs",onRPCError:null,completion:!1,onInit:e.noop,onClear:e.noop,onBlur:e.noop,onFocus:e.noop,onTerminalChange:e.noop,onExit:e.noop,onPush:e.noop,onPop:e.noop,keypress:e.noop,keydown:e.noop,onAfterRedraw:e.noop,onEchoCommand:e.noop,onFlush:e.noop,strings:{comletionParameters:"From version 1.0.0 completion function need to have two arguments",wrongPasswordTryAgain:"Wrong password try again!",wrongPassword:"Wrong password!",ajaxAbortError:"Error while aborting ajax call!",wrongArity:"Wrong number of arguments. Function '%s' expects %s got %s!",commandNotFound:"Command '%s' Not Found!",oneRPCWithIgnore:"You can use only one rpc with describe == false or rpc without system.describe",oneInterpreterFunction:"You can't use more than one function (rpc without system.describe or with option describe == false counts as one)",loginFunctionMissing:"You didn't specify a login function",noTokenError:"Access denied (no token)",serverResponse:"Server responded",wrongGreetings:"Wrong value of greetings parameter",notWhileLogin:"You can't call `%s' function while in login",loginIsNotAFunction:"Authenticate must be a function",canExitError:"You can't exit from main interpreter",invalidCompletion:"Invalid completion",invalidSelector:'Sorry, but terminal said that "%s" is not valid selector!',invalidTerminalId:"Invalid Terminal ID",login:"login",password:"password",recursiveCall:"Recursive call detected, skip",notAString:"%s function: argument is not a string",redrawError:"Internal error, wrong position in cmd redraw",invalidStrings:"Command %s have unclosed strings"}};var ce,le=[],ue=new u,fe=[],pe=!1,me=!0,he=!0;e.fn.terminal=function(r,i){function o(n){n&&(this.storage={}),this.set=function(t,r){n?this.storage[t]=r:e.Storage.set(t,r)},this.get=function(t){return n?this.storage[t]:e.Storage.get(t)},this.remove=function(t){n?delete this.storage[t]:e.Storage.remove(t)}}function a(n){if(e.terminal.unclosed_strings(n)){var t=e.terminal.escape_brackets(n);throw new Error(sprintf(re().invalidStrings,"`"+t+"`"))}return e.isFunction(Ke.processArguments)?h(n,Ke.processArguments):Ke.processArguments?e.terminal.parse_command(n):e.terminal.split_command(n)}function s(n){"string"==typeof n?we.echo(n):n instanceof Array?we.echo(e.map(n,function(e){return JSON.stringify(e)}).join(" ")):"object"==typeof n?we.echo(JSON.stringify(n)):we.echo(n)}function c(n){var t=/(.*):([0-9]+):([0-9]+)$/,r=n.match(t);r&&(we.pause(Ke.softPause),e.get(r[1],function(n){var t=location.href.replace(/[^\/]+$/,""),i=r[1].replace(t,"");we.echo("[[b;white;]"+i+"]");var o=n.split("\n"),a=+r[2]-1;we.echo(o.slice(a-2,a+3).map(function(n,t){return 2===t&&(n="[[;#f00;]"+e.terminal.escape_brackets(n)+"]"),"["+(a+t)+"]: "+n}).join("\n")).resume()},"text"))}function u(n){if(e.isFunction(Ke.onRPCError))Ke.onRPCError.call(we,n);else if(we.error("&#91;RPC&#93; "+n.message),n.error&&n.error.message){n=n.error;var t="\t"+n.message;n.file&&(t+=' in file "'+n.file.replace(/.*\//,"")+'"'),n.at&&(t+=" at line "+n.at),we.error(t)}}function p(n,t){var r=function(t,r){we.pause(Ke.softPause),e.jrpc({url:n,method:t,params:r,request:function(e,n){try{Ke.request.call(we,e,n,we)}catch(e){E(e,"USER")}},response:function(e,n){try{Ke.response.call(we,e,n,we)}catch(e){E(e,"USER")}},success:function(n){n.error?u(n.error):e.isFunction(Ke.processRPCResponse)?Ke.processRPCResponse.call(we,n.result,we):s(n.result),we.resume()},error:d})};return function(e,n){if(""!==e){try{e=a(e)}catch(e){return void E(e,"TERMINAL (get_processed_command)")}if(t&&"help"!==e.name){var i=n.token();i?r(e.name,[i].concat(e.args)):n.error("&#91;AUTH&#93; "+re().noTokenError)}else r(e.name,e.args)}}}function m(t,r,i,o){return function(s,c){if(""!==s){var l;try{l=a(s)}catch(n){return void(e.isFunction(Ke.exception)?Ke.exception(n,we):we.error(n.toString()))}var u=t[l.name],f=e.type(u);if("function"===f){if(!r||u.length===l.args.length)return u.apply(we,l.args);we.error("&#91;Arity&#93; "+sprintf(re().wrongArity,l.name,u.length,l.args.length))}else if("object"===f||"string"===f){var p=[];"object"===f&&(p=Object.keys(u),u=m(u,r,i)),c.push(u,{prompt:l.name+"> ",name:l.name,completion:"object"===f?p:n})}else e.isFunction(o)?o(s,we):e.isFunction(Ke.onCommandNotFound)?Ke.onCommandNotFound.call(we,s,we):c.error(sprintf(re().commandNotFound,l.name))}}}function d(n,t,r){we.resume(),e.isFunction(Ke.onAjaxError)?Ke.onAjaxError.call(we,n,t,r):"abort"!==t&&we.error("&#91;AJAX&#93; "+t+" - "+re().serverResponse+":\n"+e.terminal.escape_brackets(n.responseText))}function g(n,t,r){function i(n){n.error?u(n.error):e.isFunction(Ke.processRPCResponse)?Ke.processRPCResponse.call(we,n.result,we):s(n.result),we.resume()}function o(e,n){try{Ke.request.call(we,e,n,we)}catch(e){E(e,"USER")}}function a(e,n){try{Ke.response.call(we,e,n,we)}catch(e){E(e,"USER")}}function c(s){var c=s;if(""!==Ke.describe&&Ke.describe.split(".").forEach(function(e){c=c[e]}),c&&c.length){var l={};e.each(c,function(r,s){l[s.name]=function(){var r=t&&"help"!==s.name,c=Array.prototype.slice.call(arguments),l=c.length+(r?1:0);if(Ke.checkArity&&s.params&&s.params.length!==l)we.error("&#91;Arity&#93; "+sprintf(re().wrongArity,s.name,s.params.length,l));else{if(we.pause(Ke.softPause),r){var u=we.token(!0);u?c=[u].concat(c):we.error("&#91;AUTH&#93; "+re().noTokenError)}e.jrpc({url:n,method:s.name,params:c,request:o,response:a,success:i,error:d})}}}),l.help=l.help||function(n){if(void 0===n){var t=s.procs.map(function(e){return e.name}).join(", ")+", help";we.echo("Available commands: "+t)}else{var r=!1;if(e.each(c,function(e,t){if(t.name===n){r=!0;var i="";return i+="[[bu;#fff;]"+t.name+"]",t.params&&(i+=" "+t.params.join(" ")),t.help&&(i+="\n"+t.help),we.echo(i),!1}}),!r)if("help"===n)we.echo("[[bu;#fff;]help] [method]\ndisplay help for the method or list of methods if not specified");else{var i="Method `"+n+"' not found ";we.error(i)}}},r(l)}else r(null)}return e.jrpc({url:n,method:"system.describe",params:[],success:c,request:o,response:a,error:function(){r(null)}})}function w(n,t,r){r=r||e.noop;var i,o,a=e.type(n),s={},c=0;if("array"===a)i={},function n(r,a){if(r.length){var s=r[0],l=r.slice(1),u=e.type(s);"string"===u?(we.pause(Ke.softPause),!1===Ke.describe?(1==++c?o=p(s,t):we.error(re().oneRPCWithIgnore),n(l,a)):g(s,t,function(r){r?e.extend(i,r):1==++c?o=p(s,t):we.error(re().oneRPCWithIgnore),we.resume(),n(l,a)})):"function"===u?(o?we.error(re().oneInterpreterFunction):o=s,n(l,a)):"object"===u&&(e.extend(i,s),n(l,a))}else a()}(n,function(){r({interpreter:m(i,!1,t,o.bind(we)),completion:Object.keys(i)})});else if("string"===a)Ke.ignoreSystemDescribe?(i={interpreter:p(n,t)},e.isArray(Ke.completion)&&(i.completion=Ke.completion),r(i)):(we.pause(Ke.softPause),g(n,t,function(e){e?(s.interpreter=m(e,!1,t),s.completion=Object.keys(e)):s.interpreter=p(n,t),r(s),we.resume()}));else if("object"===a)r({interpreter:m(n,Ke.checkArity),completion:Object.keys(n)});else{if("undefined"===a)n=e.noop;else if("function"!==a)throw new Error(a+" is invalid interpreter value");r({interpreter:n,completion:Ke.completion})}}function _(n,t){var r="boolean"===e.type(t)?"login":t;return function(t,i,o){we.pause(Ke.softPause),e.jrpc({url:n,method:r,params:[t,i],request:function(e,n){try{Ke.request.call(we,e,n,we)}catch(e){E(e,"USER")}},response:function(e,n){try{Ke.response.call(we,e,n,we)}catch(e){E(e,"USER")}},success:function(e){o(!e.error&&e.result?e.result:null),we.resume()},error:d})}}function T(e){return"string"==typeof e?e:"string"==typeof e.fileName?e.fileName+": "+e.message:e.message}function E(n,t){e.isFunction(Ke.exceptionHandler)?Ke.exceptionHandler.call(we,n,t):we.exception(n,t)}function R(){var e;e=_e.prop?_e.prop("scrollHeight"):_e.attr("scrollHeight"),_e.scrollTop(e)}function S(n,t){try{if(e.isFunction(t))t.call(we,e.noop,we);else if("string"!=typeof t){var r=n+" must be string or function";throw r}}catch(e){return E(e,n.toUpperCase()),!1}return!0}function A(t,r){var i,o;if(de.push(ge),!r.raw&&(Q(t)>Te||t.match(/\n/))&&(!0===Ke.wrap&&r.wrap===n||!1===Ke.wrap&&!0===r.wrap)){var a=r.keepWords,s=e.terminal.split_equal(t,Te,a);for(i=0,o=s.length;i<o;++i)""===s[i]||"\r"===s[i]?de.push("<span></span>"):r.raw?de.push(s[i]):de.push(e.terminal.format(s[i],{linksNoReferrer:Ke.linksNoReferrer}))}else r.raw?de.push(t):(t=e.terminal.normalize(t),t=e.terminal.format(t,{linksNoReferrer:Ke.linksNoReferrer}),t.split(/\n/).forEach(function(e){de.push(e)}));de.push(r.finalize)}function F(n,t){try{var r,i=e.extend({exec:!0,raw:!1,finalize:e.noop},t||{}),o="function"===e.type(n)?n():n;if("string"!==e.type(o))if(e.isFunction(Ke.parseObject)){var a=Ke.parseObject(o);"string"===e.type(a)&&(r=a)}else r=o instanceof Array?e.terminal.columns(o,we.cols(),Ke.tabs):String(o);else r=o;if(""!==r&&""!==(r=e.map(r.split(K),function(n){return n&&n.match(K)&&!e.terminal.is_formatting(n)?(n=n.replace(/^\[\[|\]\]$/g,""),i.exec&&(ke&&ke.command===n?we.error(re().recursiveCall):e.terminal.extended_command(we,n)),""):n}).join(""))){if(Ke.convertLinks&&!t.raw&&(r=r.replace(D,"[[!;;]$1]").replace(q,"[[!;;]$1]")),!t.raw){if(t.formatters)try{r=e.terminal.apply_formatters(r)}catch(e){E(e,"FORMATTING")}r=e.terminal.encode(r)}A(r,i)}}catch(n){de=[],e.isFunction(Ke.exceptionHandler)?Ke.exceptionHandler.call(we,n,"TERMINAL"):alert("[Internal Exception(process_line)]:"+T(n)+"\n"+n.stack)}}function L(){Fe.resize(Te);var n=xe.empty().detach(),t=[];if(Ke.outputLimit>=0){var r;r=0===Ke.outputLimit?we.rows():Ke.outputLimit,Ie.forEach(function(n){var r="function"===e.type(n[0])?n[0]():n[0];if(r="string"===e.type(r)?r:String(r),Q(r)>Te){var i=n[1],o=e.terminal.split_equal(r,Te,i.keepWords);t=t.concat(o.map(function(e){return[e,i]}))}else t.push(n)}),t=t.slice(t.length-r-1)}else t=Ie;try{de=[],e.each(t,function(e,n){F.apply(null,n)}),Fe.before(n),we.flush(),Ke.onAfterRedraw.call(we)}catch(n){e.isFunction(Ke.exceptionHandler)?Ke.exceptionHandler.call(we,n,"TERMINAL (redraw)"):alert("Exception in redraw\n"+n.stack)}}function j(){if(Ke.greetings===n)we.echo(we.signature,{finalize:l});else if(Ke.greetings){var e=typeof Ke.greetings;"string"===e?we.echo(Ke.greetings):"function"===e?Ke.greetings.call(we,we.echo):we.error(re().wrongGreetings)}}function O(n){void 0===n&&(n=we.get_command());var t=Fe.prompt(),r=Fe.mask();switch(typeof r){case"string":n=n.replace(/./g,r);break;case"boolean":n=r?n.replace(/./g,Ke.maskChar):e.terminal.escape_formatting(n)}var i={finalize:function(e){l(e.addClass("command")),Ke.onEchoCommand.call(we,e)}};if(e.isFunction(t)){var o=t(function(e){we.echo(e+n,i)});o&&o.then&&o.then(function(e){"string"==typeof e&&we.echo(e+n,i)})}else we.echo(t+n,i)}function z(e){var n=ue.get()[e[0]];if(!n)throw new Error(re().invalidTerminalId);var t=e[1];if(fe[t])n.import_view(fe[t]);else{pe=!1;var r=e[2];r&&n.exec(r).done(function(){pe=!0,fe[t]=n.export_view()})}}function I(){pe&&(me=!1,location.hash="#"+JSON.stringify(ce),setTimeout(function(){me=!0},100))}function P(t,r,i){function o(){i||(pe=!0,Ke.historyState&&we.save_state(t,!1),pe=u),l.resolve(),e.isFunction(Ke.onAfterCommand)&&Ke.onAfterCommand.call(we,we,t)}function a(e){void 0!==e&&s(e),o(),we.resume()}ve&&(ve=!1,(Ke.historyState||Ke.execHash&&i)&&(fe.length?we.save_state(null):we.save_state()));try{if(e.isFunction(Ke.onBeforeCommand)&&!1===Ke.onBeforeCommand.call(we,we,t))return;i||(ke=e.terminal.split_command(t)),J()||i&&(e.isFunction(Ke.historyFilter)&&Ke.historyFilter(t)||t.match(Ke.historyFilter))&&Fe.history().append(t);var c=Ae.top();!r&&Ke.echoCommand&&O(t);var l=new e.Deferred,u=pe;if(t.match(/^\s*login\s*$/)&&we.token(!0))we.level()>1?we.logout(!0):we.logout(),o();else if(Ke.exit&&t.match(/^\s*exit\s*$/)&&!Be){var f=we.level();(1===f&&we.get_token()||f>1)&&(we.get_token(!0)&&we.set_token(n,!0),we.pop()),o()}else if(Ke.clear&&t.match(/^\s*clear\s*$/)&&!Be)we.clear(),o();else{var p=c.interpreter.call(we,t,we);if(p!==n){if(we.pause(Ke.softPause),!p.then)return e.when(p).done(a);p.then(a)}else Xe?ye.push(function(){o()}):o()}return l.promise()}catch(e){if(E(e,"USER"),we.resume(),!Ke.exceptionHandler)throw e}}function N(){if(e.isFunction(Ke.onBeforeLogout))try{if(!1===Ke.onBeforeLogout.call(we,we))return}catch(e){E(e,"onBeforeLogout")}if($(),e.isFunction(Ke.onAfterLogout))try{Ke.onAfterLogout.call(we,we)}catch(e){E(e,"onAfterlogout")}we.login(Ke.login,!0,W)}function $(){var e=we.prefix_name(!0)+"_";Je.remove(e+"token"),Je.remove(e+"login")}function M(n){var t=we.prefix_name()+"_interpreters",r=Je.get(t);r=r?JSON.parse(r):[],-1===e.inArray(n,r)&&(r.push(n),Je.set(t,JSON.stringify(r)))}function B(n){var t=Ae.top(),r=we.prefix_name(!0);J()||M(r),Fe.name(r),e.isFunction(t.prompt)?Fe.prompt(function(e){var n=t.prompt.call(we,e,we);n&&n.then&&n.then(function(n){"string"==typeof n&&e(n)})}):Fe.prompt(t.prompt),e.isPlainObject(t.keymap)&&Fe.keymap(e.omap(t.keymap,function(e,n){return function(){var e=[].slice.call(arguments);try{return n.apply(we,e)}catch(e){if(E(e,"USER KEYMAP"),!Ke.exceptionHandler)throw e}}})),Fe.set(""),He.resolve(),!n&&e.isFunction(t.onStart)&&t.onStart.call(we,we)}function U(){if(me&&Ke.execHash)try{if(location.hash){var e=location.hash.replace(/^#/,"");ce=JSON.parse(decodeURIComponent(e))}else ce=[];ce.length?z(ce[ce.length-1]):fe[0]&&we.import_view(fe[0])}catch(e){E(e,"TERMINAL")}}function W(){B(),j(),Ie.length&&L();var n=!1;if(e.isFunction(Ke.onInit)){Ue=function(){n=!0};try{Ke.onInit.call(we,we)}catch(e){E(e,"OnInit")}finally{Ue=e.noop,!n&&we.enabled()&&we.resume()}}he&&(he=!1,e(window).on("hashchange",U))}function J(){return Be||!1!==Fe.mask()}function Y(e,n,t){if(!n.length)return"";for(var r=k(e),i=[],o=e.length;o<n[0].length;++o){for(var a=!1,s=n[0].charAt(o),c=s.toLowerCase(),l=1;l<n.length;++l){a=!0;var u=n[l].charAt(o),f=u.toLowerCase();if(s!==u){if(t||"mixed"===r){a=!1;break}if(c!==f){a=!1;break}if("lower"===r)s=s.toLowerCase();else{if("upper"!==r){a=!1;break}s=s.toUpperCase()}}}a&&i.push(s)}return e+i.join("")}function G(e){ue.forEach(function(n){n.settings().onTerminalChange.call(e,e)})}function X(t){var r,i=Ae.top();if(e.isFunction(i.keydown)){if((r=i.keydown.call(we,t,we))!==n)return r}else if(e.isFunction(Ke.keydown)&&(r=Ke.keydown.call(we,t,we))!==n)return r}function ne(t){var r,i;if(we.enabled()){if(we.paused()){if(!Ke.pauseEvents&&(r=X(t))!==n)return r;if(68===t.which&&t.ctrlKey){if(Ke.pauseEvents&&(r=X(t))!==n)return r;if(le.length){for(i=le.length;i--;){var o=le[i];if(4!==o.readyState)try{o.abort()}catch(n){e.isFunction(Ke.exceptionHandler)?Ke.exceptionHandler.call(we,t,"AJAX ABORT"):we.error(re().ajaxAbortError)}}le=[]}we.resume()}return!1}if((r=X(t))!==n)return r;9!==t.which&&(ze=0),we.attr({scrollTop:we.attr("scrollHeight")})}}function te(e){return function(n){e.add(n)}}function re(){return e.extend({},e.terminal.defaults.strings,Ke&&Ke.strings||{})}function ie(){Le&&we.focus()}function oe(){Le=Ye,we.disable().find("textarea").trigger("blur",[!0])}function ae(e){function n(e,n){return-1!==e.type.indexOf(n)}if(e=e.originalEvent,e.clipboardData&&we.enabled()){var t=e.clipboardData.items;if(t)for(var r=0;r<t.length;r++)if(n(t[r],"image")&&Ke.pasteImage){var i=t[r].getAsFile(),o=window.URL||window.webkitURL,a=o.createObjectURL(i);we.echo('<img src="'+a+'"/>',{raw:!0})}else n(t[r],"text/plain")&&t[r].getAsString(we.insert);else if(e.clipboardData.getData){var s=e.clipboardData.getData("text/plain");we.insert(s)}return!1}}var de=[],ge=1,ve=!0,ye=[],be={"CTRL+D":function(e,t){return Be||(""===Fe.get()?Ae.size()>1||Ke.login!==n?we.pop(""):(we.resume(),we.echo("")):t()),!1},"CTRL+C":function(){""===ee()&&(O(we.get_command()+"^C"),we.set_command(""))},"CTRL+L":function(){we.clear()},TAB:function(t,r){var i,o,a=Ae.top();if(o=void 0!==a.caseSensitiveAutocomplete?a.caseSensitiveAutocomplete:Ke.caseSensitiveAutocomplete,i=Ke.completion&&"boolean"!==e.type(Ke.completion)&&a.completion===n?Ke.completion:a.completion,"settings"===i&&(i=Ke.completion),i)switch(e.type(i)){case"function":var s=we.before_cursor(Ke.wordAutocomplete);if(3===i.length){return E(new Error(re().comletionParameters),"USER"),!1}i.call(we,s,function(e){we.complete(e,{echo:!0,word:Ke.wordAutocomplete,escape:Ke.completionEscape,caseSensitive:o})});break;case"array":we.complete(i,{echo:!0,word:Ke.wordAutocomplete,escape:Ke.completionEscape,caseSensitive:o});break;default:throw new Error(re().invalidCompletion)}else r();return!1},"CTRL+V":function(e,n){return n(e),we.oneTime(200,function(){R()}),!0},"CTRL+TAB":function(){if(ue.length()>1)return we.focus(!1),!1},PAGEDOWN:function(){we.scroll(we.height())},PAGEUP:function(){we.scroll(-we.height())}},we=this;if(this.length>1)return this.each(function(){e.fn.terminal.call(e(this),r,e.extend({name:we.selector},i))});if(we.data("terminal"))return we.data("terminal");if(0===we.length)throw new Error(sprintf(re().invalidSelector,we.selector));var _e,ke,xe,Te,Ee,Ce,Re,Se,Ae,Fe,Le,je,Oe,ze=0,Ie=[],Pe=ue.length(),Ne=new f,$e=new t,He=new t,qe=te(He),De=v(),Me=te($e),Be=!1,Ue=e.noop,We=[],Ke=e.extend({},e.terminal.defaults,{name:we.selector},i||{}),Je=new o(Ke.memory),Ye=Ke.enabled,Ge=!1,Xe=!1,Ve=!0;e.extend(we,e.omap({id:function(){return Pe},clear:function(){xe.html(""),Ie=[];try{Ke.onClear.call(we,we)}catch(e){E(e,"onClear")}return we.attr({scrollTop:0}),we},export_view:function(){var n={};if(e.isFunction(Ke.onExport))try{n=Ke.onExport.call(we)}catch(e){E(e,"onExport")}return e.extend({},{focus:Ye,mask:Fe.mask(),prompt:we.get_prompt(),command:we.get_command(),position:Fe.position(),lines:C(Ie),interpreters:Ae.clone(),history:Fe.history().data},n)},import_view:function(n){if(Be)throw new Error(sprintf(re().notWhileLogin,"import_view"));if(e.isFunction(Ke.onImport))try{Ke.onImport.call(we,n)}catch(e){E(e,"onImport")}return qe(function(){we.set_prompt(n.prompt),we.set_command(n.command),Fe.position(n.position),Fe.mask(n.mask),n.focus&&we.focus(),Ie=C(n.lines),Ae=n.interpreters,Ke.importHistory&&Fe.history().set(n.history),L()}),we},save_state:function(t,r,i){if(void 0!==i?fe[i]=we.export_view():fe.push(we.export_view()),e.isArray(ce)||(ce=[]),t!==n&&!r){var o=[Pe,fe.length-1,t];ce.push(o),I()}},exec:function(n,t,r){var i=r||new e.Deferred;return Me(function(){e.isArray(n)?function e(){var r=n.shift();r?we.exec(r,t).done(e):i.resolve()}():Xe?We.push([n,t,i]):P(n,t,!0).done(function(){i.resolve(we)})}),i.promise()},autologin:function(e,n,t){return we.trigger("terminal.autologin",[e,n,t]),we},login:function(t,r,i,o){function a(t,a,c){if(a){for(;we.level()>s;)we.pop(n,!0);Ke.history&&Fe.history().enable();var l=we.prefix_name(!0)+"_";Je.set(l+"token",a),Je.set(l+"login",t),Be=!1,e.isFunction(i)&&i()}else r?(c||we.error(re().wrongPasswordTryAgain),we.pop(n,!0).set_mask(!1)):(Be=!1,c||we.error(re().wrongPassword),we.pop(n,!0).pop(n,!0)),e.isFunction(o)&&o();we.off("terminal.autologin")}if(Ne.push([].slice.call(arguments)),Be)throw new Error(sprintf(re().notWhileLogin,"login"));if(!e.isFunction(t))throw new Error(re().loginIsNotAFunction);if(Be=!0,we.token()&&1===we.level()&&!Ve)Be=!1,we.logout(!0);else if(we.token(!0)&&we.login_name(!0))return Be=!1,e.isFunction(i)&&i(),we;Ke.history&&Fe.history().disable();var s=we.level();return we.on("terminal.autologin",function(e,n,t,r){a(n,t,r)}),we.push(function(e){we.set_mask(Ke.maskChar).push(function(n){try{t.call(we,e,n,function(n,t){a(e,n,t)})}catch(e){E(e,"AUTH")}},{
prompt:re().password+": ",name:"password"})},{prompt:re().login+": ",name:"login"}),we},settings:function(){return Ke},before_cursor:function(e){var n,t=Fe.position(),r=Fe.get().substring(0,t),i=r.split(" ");if(e)if(1===i.length)n=i[0];else{var o=r.match(/(\\?")/g),a=o?o.filter(function(e){return!e.match(/^\\/)}).length:0;o=r.match(/'/g);var s=o?o.length:0;if(s%2==1)n=r.match(/('[^']*)$/)[0];else if(a%2==1)n=r.match(/("(?:[^"]|\\")*)$/)[0];else for(n=i[i.length-1],en=i.length-1;en>0;en--){var c=i[en-1];if("\\"!==c[c.length-1])break;n=i[en-1]+" "+n}}else n=r;return n},complete:function(n,t){function r(e,n){var t=we.get_command(),r=we.get_position(),i=new RegExp("^"+e,"i"),o=t.substring(0,r),s=t.substring(r),c=n.replace(i,"")+(a||"");we.set_command(o+c+s),we.set_position((o+c).length)}t=e.extend({word:!0,echo:!1,escape:!0,caseSensitive:!0},t||{});var i=t.caseSensitive,o=we.before_cursor(t.word).replace(/\\"/g,'"'),a=!1;if(t.word&&(o.match(/^"/)?a='"':o.match(/^'/)&&(a="'"),a&&(o=o.replace(/^["']/,""))),n=n.slice(),Ke.clear&&-1===e.inArray("clear",n)&&n.push("clear"),Ke.exit&&-1===e.inArray("exit",n)&&n.push("exit"),ze%2==0)Ce=we.before_cursor(t.word);else{if(we.before_cursor(t.word)!==Ce)return}var s=e.terminal.escape_regex(o);t.escape&&(s=s.replace(/(\\+)(["'() ])/g,function(e,n,t){return t.match(/[()]/)?n+"\\?\\"+t:n+"?"+t}));var c=i?"":"i",l=new RegExp("^"+s,c),u=function(){for(var e=[],r=n.length;r--;)if(l.test(n[r])){var s=n[r];'"'===a&&(s=s.replace(/"/g,'\\"')),!a&&t.escape&&(s=s.replace(/(["'() ])/g,"\\$1")),!i&&x(s)&&(o.toLowerCase()===o?s=s.toLowerCase():o.toUpperCase()===o&&(s=s.toUpperCase())),e.push(s)}return e}();if(1===u.length)return t.escape?r(s,u[0]):we.insert(u[0].replace(l,"")+(a||"")),Ce=we.before_cursor(t.word),!0;if(u.length>1)if(++ze>=2){if(ze=0,t.echo){O();var f=u.reverse().join("\t");return we.echo(e.terminal.escape_brackets(f),{keepWords:!0}),!0}}else{var p=Y(o,u,i);if(p)return r(o,p),Ce=we.before_cursor(t.word),!0}},commands:function(){return Ae.top().interpreter},set_interpreter:function(n,t){function r(){we.pause(Ke.softPause),w(n,!!t,function(n){we.resume();var t=Ae.top();e.extend(t,n),B(!0)})}return"string"===e.type(n)&&t?we.login(_(n,t),!0,r):r(),we},greetings:function(){return j(),we},paused:function(){return Xe},pause:function(n){return Me(function(){Ue(),Xe=!0,Fe.disable(n||V),n||Fe.find(".prompt").hidden(),e.isFunction(Ke.onPause)&&Ke.onPause.call(we)}),we},resume:function(){return Me(function(){Xe=!1,Ye&&ue.front()===we&&Fe.enable(),Fe.find(".prompt").visible();var n=We;We=[];for(var t=0;t<n.length;++t)we.exec.apply(we,n[t]);we.trigger("resume");var r=ye.shift();r&&r(),R(),e.isFunction(Ke.onResume)&&Ke.onResume.call(we)}),we},cols:function(){return Ke.numChars?Ke.numChars:(void 0===Te&&(Te=y(we,De)),Te)},rows:function(){return Ke.numRows?Ke.numRows:(void 0===Ee&&(Ee=b(we,De)),Ee)},history:function(){return Fe.history()},history_state:function(e){function n(){Ke.historyState=!0,fe.length?ue.length()>1&&we.save_state(null):we.save_state()}return e?void 0===window.setImmediate?setTimeout(n,0):setImmediate(n):Ke.historyState=!1,we},clear_history_state:function(){return ce=[],fe=[],we},next:function(){if(1===ue.length())return we;ue.front().disable();var n=ue.rotate().enable(),t=n.offset().top-50;e("html,body").animate({scrollTop:t},500);try{G(n)}catch(e){E(e,"onTerminalChange")}return n},focus:function(e,n){return Me(function(){if(1===ue.length())!1===e?we.disable(n):we.enable(n);else if(!1===e)we.next();else{var t=ue.front();if(t!==we&&(ue.forEach(function(e){e!==we&&e.enabled()&&e.disable(n)}),!n))try{G(we)}catch(e){E(e,"onTerminalChange")}ue.set(we)}we.enable(n)}),we},freeze:function(e){qe(function(){e?(we.disable(),Ge=!0):(Ge=!1,we.enable())})},frozen:function(){return Ge},enable:function(e){return Ye||Ge||(Te===n&&we.resize(),Me(function(){var t;if(!e&&!Ye)try{t=Ke.onFocus.call(we,we)}catch(e){E(e,"onFocus")}(!e&&t===n||e)&&(Ye=!0,we.paused()||Fe.enable())})),we},disable:function(e){return Me(function(){var t;if(!e&&Ye)try{t=Ke.onBlur.call(we,we)}catch(e){E(e,"onBlur")}(!e&&t===n||e)&&(Ye=!1,Fe.disable())}),we},enabled:function(){return Ye},signature:function(){for(var e=we.cols(),n=se.length;n--;){var t=se[n].map(function(e){return e.length});if(Math.max.apply(null,t)<=e)return se[n].join("\n")+"\n"}return""},version:function(){return e.terminal.version},cmd:function(){return Fe},get_command:function(){return Fe.get()},set_command:function(e){return qe(function(){Fe.set(e)}),we},set_position:function(e,n){return qe(function(){Fe.position(e,n)}),we},get_position:function(){return Fe.position()},insert:function(e,n){if("string"==typeof e)return qe(function(){var t=we.is_bottom();Fe.insert(e,n),(Ke.scrollOnEcho||t)&&R()}),we;throw new Error(sprintf(re().notAString,"insert"))},set_prompt:function(n){return qe(function(){S("prompt",n)&&(e.isFunction(n)?Fe.prompt(function(e){n(e,we)}):Fe.prompt(n),Ae.top().prompt=n)}),we},get_prompt:function(){return Ae.top().prompt},set_mask:function(e){return qe(function(){Fe.mask(!0===e?Ke.maskChar:e)}),we},get_output:function(n){return n?Ie:e.map(Ie,function(n){return e.isFunction(n[0])?n[0]():n[0]}).join("\n")},resize:function(n,t){if(we.is(":visible")){if(n&&t&&(we.width(n),we.height(t)),n=we.width(),t=we.height(),void 0!==Ke.numChars&&void 0!==Ke.numRows)return L(),void R();De=v();var r=y(we,De),i=b(we,De);if(r!==Te||i!==Ee){Te=r,Ee=i,Fe.resize(Te),we.refresh();var o=Ae.top();e.isFunction(o.resize)?o.resize.call(we,we):e.isFunction(Ke.onResize)&&Ke.onResize.call(we,we),R()}}else we.stopTime("resize"),we.oneTime(500,"resize",function(){we.resize(n,t)});return we},refresh:L,flush:function(){try{var n,t=we.is_bottom();if(e.each(de,function(t,r){r===ge?n=e("<div></div>"):e.isFunction(r)?(n.appendTo(xe),r(n)):e("<div/>").html(r).appendTo(n).width("100%")}),Ke.outputLimit>=0){var r;r=0===Ke.outputLimit?we.rows():Ke.outputLimit;var i=xe.find("div div");if(i.length+1>r){var o=i.length-r+1,a=i.slice(0,o),s=a.parent();a.remove(),s.each(function(){var n=e(this);n.is(":empty")&&n.remove()})}}try{Ke.onFlush.call(we,we)}catch(e){E(e,"onFlush")}(Ke.scrollOnEcho||t)&&R(),de=[]}catch(n){e.isFunction(Ke.exceptionHandler)?Ke.exceptionHandler.call(we,n,"TERMINAL (Flush)"):alert("[Flush] "+T(n)+"\n"+n.stack)}return we},update:function(e,n){return qe(function(){e<0&&(e=Ie.length+e),Ie[e]?(null===n?Ie.splice(e,1):Ie[e][0]=n,L()):we.error("Invalid line number "+e)}),we},last_index:function(){return Ie.length-1},echo:function(n,t){function r(n){try{var r=e.extend({flush:!0,raw:Ke.raw,finalize:e.noop,keepWords:!1,formatters:!0},t||{});r.raw&&function(e){r.finalize=function(n){n.addClass("raw"),e(n)}}(r.finalize),r.flush&&(de.length&&we.flush(),de=[]),"function"==typeof n&&(n=n.bind(we)),F(n,r),Ie.push([n,e.extend(r,{exec:!1})]),r.flush&&we.flush()}catch(n){e.isFunction(Ke.exceptionHandler)?Ke.exceptionHandler.call(we,n,"TERMINAL (echo)"):alert("[Terminal.echo] "+T(n)+"\n"+n.stack)}}try{t&&e.isFunction(t.finalize)&&t.finalize(e("<div/>")),e.isFunction(n.then)?e.when(n).done(r):r(n)}catch(e){E(e,"USER:echo(finalize)")}return we},error:function(n,t){t=e.extend({},t,{raw:!1,formatters:!1});var r=e.terminal.escape_brackets(n).replace(/\\$/,"&#92;").replace(H,"]$1[[;;;error]");return we.echo("[[;;;error]"+r+"]",t)},exception:function(n,t){var r=T(n);if(t&&(r="&#91;"+t+"&#93;: "+r),r&&we.error(r,{finalize:function(e){e.addClass("exception message")},keepWords:!0}),"string"==typeof n.fileName&&(we.pause(Ke.softPause),e.get(n.fileName,function(e){var t=n.lineNumber-1,r=e.split("\n")[t];r&&we.error("["+n.lineNumber+"]: "+r),we.resume()},"text")),n.stack){var i=e.terminal.escape_brackets(n.stack);we.echo(i.split(/\n/g).map(function(e){return"[[;;;error]"+e.replace(H,function(e){return"]"+e+"[[;;;error]"})+"]"}).join("\n"),{finalize:function(e){e.addClass("exception stack-trace")},formatters:!1})}},scroll:function(e){var n;return e=Math.round(e),_e.prop?(e>_e.prop("scrollTop")&&e>0&&_e.prop("scrollTop",0),n=_e.prop("scrollTop"),_e.scrollTop(n+e)):(e>_e.attr("scrollTop")&&e>0&&_e.attr("scrollTop",0),n=_e.attr("scrollTop"),_e.scrollTop(n+e)),we},logout:function(e){if(Be)throw new Error(sprintf(re().notWhileLogin,"logout"));return qe(function(){if(e){var t=Ne.pop();we.set_token(n,!0),we.login.apply(we,t)}else if(1===Ae.size()&&we.token())we.logout(!0);else for(;Ae.size()>1;)we.token()?we.logout(!0).pop().pop():we.pop()}),we},token:function(e){return Je.get(we.prefix_name(e)+"_token")},set_token:function(e,n){var t=we.prefix_name(n)+"_token";return void 0===e?Je.remove(t,e):Je.set(t,e),we},get_token:function(e){return we.token(e)},login_name:function(e){return Je.get(we.prefix_name(e)+"_login")},name:function(){return Ae.top().name},prefix_name:function(e){var n=(Ke.name?Ke.name+"_":"")+Pe;if(e&&Ae.size()>1){var t=Ae.map(function(e){return e.name||""}).slice(1).join("_");t&&(n+="_"+t)}return n},read:function(n,t){var r=new e.Deferred;return we.push(function(n){we.pop(),e.isFunction(t)&&t(n),r.resolve(n)},{prompt:n}),r.promise()},push:function(t,r){return Me(function(){function i(){Ke.onPush.call(we,s,Ae.top(),we),B()}r=r||{};var o={infiniteLogin:!1},a=e.extend({},o,r);!a.name&&ke&&(a.name=ke.name),a.prompt===n&&(a.prompt=(a.name||">")+" ");var s=Ae.top();s&&(s.mask=Fe.mask());var c=Xe;w(t,!!r.login,function(n){if(Ae.push(e.extend({},n,a)),!0===a.completion&&(e.isArray(n.completion)?Ae.top().completion=n.completion:n.completion||(Ae.top().completion=!1)),a.login){var r,o=e.type(a.login);"function"===o?(r=a.infiniteLogin?e.noop:we.pop,we.login(a.login,a.infiniteLogin,i,r)):("string"===e.type(t)&&"string"===o||"boolean"===o)&&(r=a.infiniteLogin?e.noop:we.pop,we.login(_(t,a.login),a.infiniteLogin,i,r))}else i();!c&&we.enabled()&&we.resume()})}),we},pop:function(t,r){t!==n&&O(t);var i,o=we.token(!0);if(1===Ae.size())if(i=Ae.top(),Ke.login){if(r||Ke.onPop.call(we,i,null,we),N(),e.isFunction(Ke.onExit))try{Ke.onExit.call(we,we)}catch(e){E(e,"onExit")}}else we.error(re().canExitError);else{o&&$();var a=Ae.pop();if(i=Ae.top(),B(),r||Ke.onPop.call(we,a,i),Be&&we.get_prompt()!==re().login+": "&&(Be=!1),e.isFunction(a.onExit))try{a.onExit.call(we,we)}catch(e){E(e,"onExit")}we.set_mask(i.mask)}return we},option:function(n,t){if(void 0===t){if("string"==typeof n)return Ke[n];"object"==typeof n&&e.each(n,function(e,n){Ke[e]=n})}else Ke[n]=t,n.match(/^num(Chars|Rows)$/)&&L();return we},level:function(){return Ae.size()},reset:function(){return qe(function(){for(we.clear();Ae.size()>1;)Ae.pop();W()}),we},purge:function(){return qe(function(){var n=we.prefix_name()+"_",t=Je.get(n+"interpreters");t&&e.each(JSON.parse(t),function(e,n){Je.remove(n+"_commands"),Je.remove(n+"_token"),Je.remove(n+"_login")}),Fe.purge(),Je.remove(n+"interpreters")}),we},destroy:function(){return qe(function(){Fe.destroy().remove(),xe.remove(),Qe.remove(),e(document).unbind(".terminal_"+we.id()),e(window).unbind(".terminal_"+we.id()),we.unbind("click wheel mousewheel mousedown mouseup"),we.removeData("terminal").removeClass("terminal").unbind(".terminal"),Ke.width&&we.css("width",""),Ke.height&&we.css("height",""),e(window).off("blur",oe).off("focus",ie),we.find(".terminal-fill").remove(),ue.remove(Pe),je&&je.unobserve(we[0]),Oe&&Oe.disconnect(),we.resizer("unbind"),ue.length()||e(window).off("hashchange")}),we},scroll_to_bottom:function(){return R(),we},is_bottom:function(){if(-1===Ke.scrollBottomOffset)return!1;var n,t,r;return we.is("body")?(n=e(document).height(),t=e(window).scrollTop(),r=window.innerHeight):(n=_e[0].scrollHeight,t=_e.scrollTop(),r=_e.outerHeight()),t+r>n-Ke.scrollBottomOffset}},function(e,n){return function(){try{return n.apply(we,[].slice.apply(arguments))}catch(n){if("exec"!==e&&"resume"!==e&&E(n,"TERMINAL"),!Ke.exceptionHandler)throw n}}})),!0===Ke.ignoreSystemDescribe&&(Ke.describe=!1),Ke.width&&we.width(Ke.width),Ke.height&&we.height(Ke.height),_e=we.scroll_element(),e(document).bind("ajaxSend.terminal_"+we.id(),function(e,n){le.push(n)});var Qe=e('<div class="terminal-wrapper"/>').appendTo(we);if(e('<div class="terminal-fill"/>').appendTo(we),xe=e("<div>").addClass("terminal-output").attr("role","log").appendTo(Qe),we.addClass("terminal"),Ke.login&&e.isFunction(Ke.onBeforeLogin))try{!1===Ke.onBeforeLogin.call(we,we)&&(Ve=!1)}catch(e){if(E(e,"onBeforeLogin"),!Ke.exceptionHandler)throw e}var Ze;if("string"==typeof r)Ze=r;else if(r instanceof Array)for(var en=0,nn=r.length;en<nn;++en)if("string"==typeof r[en]){Ze=r[en];break}return!Ze||"string"!=typeof Ke.login&&!0!==Ke.login||(Ke.login=_(Ze,Ke.login)),ue.append(we),e(document).on("paste.terminal_"+we.id(),ae),w(r,!!Ke.login,function(t){function r(n){if(n=n.originalEvent){var t=document.elementFromPoint(n.clientX,n.clientY);!e(t).closest(".terminal").length&&we.enabled()&&we.disable()}}function i(){if(we.is(":visible")){var e=we.width(),n=we.height();Se===n&&Re===e||we.resize(),Se=n,Re=e}}function o(){je&&je.unobserve(we[0]);var n;je=new IntersectionObserver(function(){we.is(":visible")?(we.resizer("unbind").resizer(i),i(),n&&we.enabled()):(n=e.terminal.active()===we&&we.enabled(),we.disable())},{root:document.body}),je.observe(we[0])}function a(n){var t=ue.get()[n[0]];if(t&&Pe===t.id()&&n[2])try{if(Xe){var r=e.Deferred();return ye.push(function(){return t.exec(n[2]).done(function(){t.save_state(n[2],!0,n[1]),r.resolve()})}),r.promise()}return t.exec(n[2]).done(function(){t.save_state(n[2],!0,n[1])})}catch(n){var i=t.settings();if(e.isFunction(i.exceptionHandler))i.exceptionHandler.call(we,n,"EXEC HASH");else{var o=e.terminal.escape_brackets(Ce),a="Error while exec with command "+o;t.error(a).exception(n)}}}function s(n,t){if(!h){var r=Ae.top();if(e.isFunction(r.mousewheel)){if(!1===r.mousewheel(n,t,we))return}else if(e.isFunction(Ke.mousewheel)&&!1===Ke.mousewheel(n,t,we))return;t>0?we.scroll(-40):we.scroll(40)}}(Ke.completion&&"boolean"!=typeof Ke.completion||!Ke.completion)&&(t.completion="settings");var l=e.extend({},be,e.omap(Ke.keymap||{},function(e,n){return be[e]?function(t){return n(t,be[e])}:n}));Ae=new f(e.extend({},Ke.extra,{name:Ke.name,prompt:Ke.prompt,keypress:Ke.keypress,keydown:Ke.keydown,resize:Ke.onResize,greetings:Ke.greetings,mousewheel:Ke.mousewheel,keymap:l},t)),Fe=e("<div/>").appendTo(Qe).cmd({prompt:Ke.prompt,history:Ke.memory?"memory":Ke.history,historyFilter:Ke.historyFilter,historySize:Ke.historySize,width:"100%",enabled:!1,keydown:ne,keymap:l,clickTimeout:Ke.clickTimeout,keypress:function(n){var t=Ae.top();if(Ye&&(!Xe||!Ke.pauseEvents)){if(e.isFunction(t.keypress))return t.keypress.call(we,n,we);if(e.isFunction(Ke.keypress))return Ke.keypress.call(we,n,we)}},onCommandChange:function(n){if(e.isFunction(Ke.onCommandChange))try{Ke.onCommandChange.call(we,n,we)}catch(e){if(E(e,"onCommandChange"),!Ke.exceptionHandler)throw e}R()},commands:P}),Ye&&we.is(":visible")&&!Z?we.focus(n,!0):we.disable(),we.oneTime(100,function(){e(document).bind("click.terminal_"+we.id(),r).bind("contextmenu.terminal_"+we.id(),r)});var u=e(window);document.addEventListener("resume",function(){we.disable()}),Z?we.click(function(){Ge||(we.enabled()?we.disable():(we.focus(),Fe.enable()))}):(u.on("focus.terminal_"+we.id(),ie).on("blur.terminal_"+we.id(),oe),function(){function n(){if(r.is(".terminal")||r.is(".terminal-wrapper")){var e=we.get_command().length;we.set_position(e)}else r.closest(".prompt").length&&we.set_position(0);t()}function t(){i=0,r=null}var r,i=0,o="click_"+we.id();we.mousedown(function(n){r=e(n.target)}).mouseup(function(){if(""===ee()&&r)if(1==++i){if(!Ge){if(Ye){var e=Ke.clickTimeout;return void we.oneTime(e,o,n)}we.focus()}}else we.stopTime(o);t()}).dblclick(function(){t(),we.stopTime(o)})}(),function(){var e=we.find("textarea");we.on("mousedown.terminal",function(n){if(2===n.originalEvent.button&&""===ee()){we.enabled()||we.enable();var t=Fe.offset();e.css({left:n.pageX-t.left-5,top:n.pageY-t.top-5})}}),we.bind("contextmenu",function(){we.oneTime(100,function(){e.css({left:"",top:""})})})}()),we.delegate(".exception a","click",function(n){var t=e(this).attr("href");t.match(/:[0-9]+$/)&&(n.preventDefault(),c(t))}),we.is(":visible")&&(Te=we.cols(),Fe.resize(Te),De||(De=v()),Ee=b(we,De)),$e.resolve(),Ke.login?we.login(Ke.login,!0,W):W(),we.is(":visible")&&we.resizer(i);var p=!!we.closest("body").length,m=window.MutationObserver||window.WebKitMutationObserver;window.IntersectionObserver&&(m&&(Oe=new m(function(){we.closest("body").length?(p||(we.scroll_to_bottom(),o()),p=!0):p&&(p=!1)}),Oe.observe(document.body,{childList:!0})),p&&o()),Ke.execHash&&location.hash?setTimeout(function(){try{var e=location.hash.replace(/^#/,"");ce=JSON.parse(decodeURIComponent(e));var n=0;!function e(){var t=ce[n++];t?a(t).done(e):pe=!0}()}catch(e){}}):pe=!0;var h=!1;if(e(document).bind("keydown.terminal_"+we.id(),function(e){e.shiftKey&&(h=!0)}).bind("keyup.terminal_"+we.id(),function(e){(e.shiftKey||16===e.which)&&(h=!1)}),e.event.special.mousewheel)we.on("mousewheel",function(e,n){s(e,n),e.preventDefault()});else{var d;d="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==n?"mousewheel":"DOMMouseScroll",we.on(d,function(e){var n;n="mousewheel"===d?-.025*e.originalEvent.wheelDelta:e.originalEvent.deltaY||e.originalEvent.detail,s(e,-n),e.preventDefault()})}}),we.data("terminal",we),we}});</script> <script>!function(e){function t(t){var n=t||window.event,i=[].slice.call(arguments,1),l=0,s=0,o=0;return t=e.event.fix(n),t.type="mousewheel",n.wheelDelta&&(l=n.wheelDelta/120),n.detail&&(l=-n.detail/3),o=l,void 0!==n.axis&&n.axis===n.HORIZONTAL_AXIS&&(o=0,s=-1*l),void 0!==n.wheelDeltaY&&(o=n.wheelDeltaY/120),void 0!==n.wheelDeltaX&&(s=-1*n.wheelDeltaX/120),i.unshift(t,l,s,o),(e.event.dispatch||e.event.handle).apply(this,i)}var n=["DOMMouseScroll","mousewheel"];if(e.event.fixHooks)for(var i=n.length;i;)e.event.fixHooks[n[--i]]=e.event.mouseHooks;e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=n.length;e;)this.addEventListener(n[--e],t,!1);else this.onmousewheel=t},teardown:function(){if(this.removeEventListener)for(var e=n.length;e;)this.removeEventListener(n[--e],t,!1);else this.onmousewheel=null}},e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}(jQuery);</script> <script>!function(){function e(){var e=navigator.userAgent.indexOf("MSIE ")>0||!!navigator.userAgent.match(/Trident.*rv\:11\./)||navigator.userAgent.indexOf("Edge/")>0;if(!("KeyboardEvent"in window)||"key"in KeyboardEvent.prototype&&!e)return!1;var r={get:function(e){var r=o.keys[this.which||this.keyCode];return Array.isArray(r)&&(r=r[+this.shiftKey]),r},enumerable:!0,configurable:!0};return Object.defineProperty(KeyboardEvent.prototype,"key",r),r}var r,o={polyfill:e,keys:{3:"Cancel",6:"Help",8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",28:"Convert",29:"NonConvert",30:"Accept",31:"ModeChange",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",41:"Select",42:"Print",43:"Execute",44:"PrintScreen",45:"Insert",46:"Delete",48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],91:"OS",93:"ContextMenu",106:"*",107:"+",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",181:"VolumeMute",182:"VolumeDown",183:"VolumeUp",186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"'],224:"Meta",225:"AltGraph",246:"Attn",247:"CrSel",248:"ExSel",249:"EraseEof",250:"Play",251:"ZoomOut"}};for(r=1;r<25;r++)o.keys[111+r]="F"+r;var t="";for(r=65;r<91;r++)t=String.fromCharCode(r),o.keys[r]=[t.toLowerCase(),t.toUpperCase()];for(r=96;r<106;r++)t=String.fromCharCode(r-48),o.keys[r]=t;"function"==typeof define&&define.amd?define("keyboardevent-key-polyfill",o):"undefined"!=typeof exports&&"undefined"!=typeof module?module.exports=o:window&&(window.keyboardeventKeyPolyfill=o)}();</script> </head> <body> <input type="file" name="file" id="fileInput"> <div class="tv"> <div id="term"></div> <div class="scanlines"></div> </div> <script>function typed(e){return function(t,n,r,o){anim=!0;var i=t.get_prompt(),s=0;if(n.length>0){t.set_prompt("");var a="",f=setInterval(function(){var l=$.terminal.substring(n,s,s+1);a+=l,t.set_prompt(a),s++,s==length(n)&&(clearInterval(f),setTimeout(function(){e(t,n,i),anim=!1,o&&o()},r)),$("#term").scrollTop($("#term").prop("scrollHeight"))},r)}}}function length(e){return e=$.terminal.strip(e),$("<span>"+e+"</span>").text().length}function fileInputChange(){var e=$("#fileInput").get(0).files;return e&&e[0]?e[0].name+", "+e[0].size+" Byte":{msg:"No file selected!",iserror:!0}}function startTransaction(e,t){finish=!1,waiting=!0,term.set_prompt(""),term.find(".cursor").removeClass("blink"),term.find(".cursor").hide(),"object"===$.type(e)&&(iserror=e.iserror,e=e.msg||""),e?typed_message(term,e,1,function(){finish=!0}):finish=!0,"function"==typeof t&&t()}function endTransaction(e,t){!function n(){finish?(e&&("object"===$.type(e)&&(t=e.iserror||!1,e=e.msg||""),t?term.error(e):term.echo(e)),term.find(".cursor").show(),term.find(".cursor").addClass("blink"),term.set_prompt("dc-hdmi> "),$("#term").scrollTop($("#term").prop("scrollHeight")),waiting=!1):setTimeout(n,350)}()}function set_size(){var e=$(window).height(),t=2*e/170;scanlines[0].style.setProperty("--time",t),tv[0].style.setProperty("--width",$(window).width()),tv[0].style.setProperty("--height",e)}function help(e){var t="";e&&(t=" \nTo [[b;#fff;]flash] the firmware, you have 2 options:\n \n1) [[b;#fff;]select] a firmware from your harddisk\n   and [[b;#fff;]upload] it to the staging area\n2) [[b;#fff;]download] the latest firmware from dc.i74.de\n   to the staging area\n \nAfter that, you are ready to [[b;#fff;]flash] the firmware\nto the FPGA configuration memory. It's possible to re-flash\nthe firmware from the staging area at any time, because it's\nstored in the flash of the WiFi chip.\n \n"),t+="[[b;#fff;]select]:   select file to upload\n",t+="[[b;#fff;]upload]:   upload selected file\n",t+="[[b;#fff;]download]: download latest flash file from dc.i74.de\n",t+="[[b;#fff;]flash]:    flash uploaded file\n",typed_message(term,t,1)}function progress(e,t){var n,r=Math.round(t*e/100),o="",i="";for(n=r;n--;)i+="=";for(i.length>0&&(i=i.replace(/=$/,">")),n=t-r;n--;)o+=" ";return"["+i+o+"] "+e+"%"}function uploadFile(){var e=$("#fileInput").get(0).files[0];if(!e)return void endTransaction("No file selected!",!0);var t=new FormData,n=new XMLHttpRequest;t.append("file",e),n.onerror=function(e){endTransaction("Error during upload!",!0)},n.onload=function(e){n.status>=200&&n.status<400?endTransaction(progress(100,progressSize)+" [[b;green;]OK]"):endTransaction("Error uploading file: "+n.status,!0)},n.upload.onprogress=function(e){var t=Math.round(progressSize/e.total*e.loaded);term.set_prompt(progress(t,progressSize))},n.onabort=function(e){endTransaction("Abort!",!0)};term.get_prompt();term.set_prompt(progress(0,progressSize)),n.open("POST","/upload?size="+e.size),n.send(t)}keyboardeventKeyPolyfill.polyfill();var typed_prompt=typed(function(e,t,n){e.set_prompt(t+" ")}),typed_message=typed(function(e,t,n){e.echo(t),e.set_prompt(n)}),progressSize=40,anim=!1,waiting=!1,finish=!1,scanlines=$(".scanlines"),tv=$(".tv"),term=$("#term").terminal(function(e,t){e.match(/^\s*exit\s*$/)?($(".tv").addClass("collapse"),t.disable()):e.match(/^\s*help\s*$/)?help(!0):e.match(/^\s*select\s*$/)?(startTransaction("Please select file to upload...",function(){$("#fileInput").click()}),function e(){t.find(".cursor").hasClass("blink")?setTimeout(function(){endTransaction(fileInputChange())},150):setTimeout(e,350)}()):e.match(/^\s*upload\s*$/)?startTransaction("Starting upload...",function(){uploadFile()}):e.match(/^\s*file\s*$/)?startTransaction("",function(){endTransaction(fileInputChange())}):e.match(/^\s*test\s*$/)?(startTransaction("Test"),setTimeout(function(){endTransaction("...")},1e3)):""!==e?(t.error("unkown command, try:"),help()):t.echo("")},{name:"dc-hdmi",onResize:set_size,exit:!1,onInit:function(e){set_size(),typed_message(e,"type [[b;#fff;]help] to get help!",75)},prompt:"dc-hdmi> ",greetings:["     ____                                          __ ","    / __ \\ ___ _____ ___   ______ ____ ___   ____ / /_","   / / / // _// _  // _ \\ /     // __// _ \\ /  _// __/","  / /_/ // / / ___// // // / / // /_ / // /_\\ \\ / /__ "," /_____//_/ /____/ \\__\\_/_/ /_//___/ \\__\\_/____/\\___/","                                   HDMI by chriz2600",""].join("\n"),keydown:function(e){if(waiting||anim)return!1}});</script> </body> </html>
